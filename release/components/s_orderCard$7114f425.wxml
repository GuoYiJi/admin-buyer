<template name="s_orderCard$7114f425"><view class="_div data-v-73b2e4c8 wrapper"><view class="_div data-v-73b2e4c8 header" wx:if="{{!isRefund && orderItem.layer !== -1 && orderItem.isPing !== 1}}"><label class="_span data-v-73b2e4c8 orderNo">订单编号: {{orderItem.orderNo}}</label> <label class="_span data-v-73b2e4c8 orderState">
      {{
      orderItem.state === 1 ? '等待支付'
      : orderItem.state === 2 ? '已取消'
      : orderItem.state === 5 ? '待发货'
      : orderItem.state === 6 ? '已发货'
      : orderItem.state === 7 ? '交易成功'
      : orderItem.state === 8 ? '交易关闭'
      : orderItem.state === 9 ? '拼单中'
      : orderItem.state === 10 ? '审核中'
      : '未知状态'
      }}
  </label></view> <view class="_div data-v-73b2e4c8 header" wx:if="{{orderItem.isPing === 1 && orderItem.layer === -1}}"><label class="_span data-v-73b2e4c8 orderNo">总拼团订单编号: {{orderItem.orderNo}}</label> <label class="_span data-v-73b2e4c8 orderState">
      {{
        orderItem.state === 1 ? '等待支付'
        : orderItem.state === 2 ? '已取消拼团'
        : orderItem.state === 5 ? '拼团成功, 待发货'
        : orderItem.state === 6 ? '已发货'
        : orderItem.state === 7 ? '交易成功'
        : orderItem.state === 8 ? '交易关闭'
        : orderItem.state === 9 ? '拼单中, 还差' + enoughPeopleNum + '人'
        : orderItem.state === 10 ? '审核中'
        : '未知状态'
      }}
    </label></view> <view class="_div data-v-73b2e4c8 header" wx:if="{{orderItem.isPing === 1 && orderItem.layer !== -1}}"><label class="_span data-v-73b2e4c8 orderNo">子拼团订单编号: {{orderItem.orderNo}}</label> <label class="_span data-v-73b2e4c8 orderState">
      {{
      orderItem.state === 1 ? '等待支付'
      : orderItem.state === 2 ? '已取消拼团'
      : orderItem.state === 5 ? '拼团成功, 待发货'
      : orderItem.state === 6 ? '已发货'
      : orderItem.state === 7 ? '交易成功'
      : orderItem.state === 8 ? '交易关闭'
      : orderItem.state === 9 ? '拼单中, 还差' + enoughPeopleNum + '人'
      : orderItem.state === 10 ? '审核中'
      : '未知状态'
      }}
  </label></view> <view class="_div data-v-73b2e4c8 header" wx:if="{{isRefund}}"><label class="_span data-v-73b2e4c8 orderNo">订单编号: {{orderItem.orderRefundNo}}</label> <label class="_span data-v-73b2e4c8 orderState">
        {{
        orderItem.state === 0 && orderItem.refundType === 0 ? '买家发起, 仅退款'
        : orderItem.state === 0 && orderItem.refundType === 1 ? '买家发起, 退货退款'
        : orderItem.state === 0 && orderItem.refundType === 2 ? '买家发起, 仅换货'
        : orderItem.state === 1 && orderItem.refundType === 0 ? '退款成功'
        : orderItem.state === 1 && orderItem.refundType === 1 ? '退货退款成功'
        : orderItem.state === 1 && orderItem.refundType === 2 ? '换货成功'
        : orderItem.state === 2 && orderItem.refundType === 0 ? '仅退款已被拒绝'
        : orderItem.state === 2 && orderItem.refundType === 1? '退款退货已被拒绝'
        : orderItem.state === 2 && orderItem.refundType === 2 ? '仅换货已被拒绝'
        : orderItem.state === 3 && orderItem.refundType === 1 ? '退货退款, 等待买家发货'
        : orderItem.state === 3 && orderItem.refundType === 2 ? '换货, 等待买家发货'
        : orderItem.state === 4 && orderItem.refundType === 1 ? '退货退款, 等待卖家收货'
        : orderItem.state === 4 && orderItem.refundType === 2 ? '换货, 等待卖家收货'
        : orderItem.state === 5 ? '撤销售后'
        : '未知状态'
      }}
      </label></view> <view class="_div data-v-73b2e4c8 order-body" wx:if="{{orderItem.state !== 5}}"><view class="_div data-v-73b2e4c8 img-box" wx:if="{{orderItem.goods}}"><view class="_i data-v-73b2e4c8 shopImg" style=" {{('background-image:' + ('url(' + orderItem.goods.image + ')') + ';')}}"></view></view><view class="_div data-v-73b2e4c8 img-box" wx:elif="{{orderItem.layer !== -1 && !isRefund}}" bindtap="handleProxy" data-eventid="{{'0'}}" data-comkey="{{$k}}"><view class="_i data-v-73b2e4c8 shopImg" wx:key="goodIndex" key="{{goodIndex}}" wx:if="{{goodIndex < 3}}" wx:for="{{orderItem.orderGoods}}" wx:for-index="goodIndex" wx:for-item="orderGood" style=" {{('background-image:' + ('url(' + orderGood.image + ')') + ';')}}"></view></view><view class="_div data-v-73b2e4c8 img-box" wx:elif="{{isRefund}}" bindtap="handleProxy" data-eventid="{{'1'}}" data-comkey="{{$k}}"><view class="_i data-v-73b2e4c8 shopImg" wx:key="goodIndex" key="{{goodIndex}}" wx:if="{{goodIndex < 3}}" wx:for="{{orderItem.goodsList}}" wx:for-index="goodIndex" wx:for-item="orderGood" style=" {{('background-image:' + ('url(' + orderGood.image + ')') + ';')}}"></view></view> <view class="_div data-v-73b2e4c8 icon"></view></view> <view class="_div data-v-73b2e4c8 pingOrder-body" wx:if="{{orderItem.state == 5 && orderItem.goods}}"><view class="_div data-v-73b2e4c8 img-box" wx:if="{{orderItem.goods}}"><view class="_i data-v-73b2e4c8 shopImg" style=" {{('background-image:' + ('url(' + orderItem.goods.image + ')') + ';')}}"></view></view></view> <view class="_div data-v-73b2e4c8 pingOrder-body" wx:if="{{orderItem.state == 5 && !isRefund}}" wx:key="orderGoodIndex" key="{{orderGoodIndex}}" wx:for="{{orderItem.orderGoods}}" wx:for-index="orderGoodIndex" wx:for-item="orderGood"><view class="_div data-v-73b2e4c8 goods-body"><view class="_i data-v-73b2e4c8 goods-img" style=" {{('background-image:' + ('url(' + orderGood.image + ')') + ';')}}"></view> <view class="_div data-v-73b2e4c8 goods-info"><label class="_span data-v-73b2e4c8 title">{{orderGood.name || '[商品未设置标题]'}}</label> <label class="_span data-v-73b2e4c8 details"><view class="_p data-v-73b2e4c8 stall">档口名称: {{orderGood.stallInfo3}}</view> <view class="_p data-v-73b2e4c8 time">货期: {{orderGood.delivery}}</view></label> <view class="_div data-v-73b2e4c8 footer"><view class="_div data-v-73b2e4c8 size"><label wx:key="skuIndex" key="{{skuIndex}}" wx:for="{{skuList[orderGoodIndex]}}" wx:for-index="skuIndex" wx:for-item="skuItem" class="_span data-v-73b2e4c8">
              {{skuItem.color}}色: {{skuItem.size}}码丨{{skuItem.num}}件
            </label></view> <button class="_button data-v-73b2e4c8 edit" bindtap="handleProxy" data-eventid="{{'2-'+orderGoodIndex}}" data-comkey="{{$k}}">编辑</button></view></view></view> <view class="_div data-v-73b2e4c8 table" wx:if="{{orderItem.state === 5 && orderItem.isHasDeliver && !isEdited}}"><view style="border: none;" class="_table data-v-73b2e4c8"><view class="_tr data-v-73b2e4c8"><view class="_th data-v-73b2e4c8">颜色</view> <view class="_th data-v-73b2e4c8">码数</view> <view class="_th data-v-73b2e4c8">总件数</view> <view class="_th data-v-73b2e4c8">待发件数</view> <view class="_th data-v-73b2e4c8">剩余待发</view></view> <view wx:key="deliverIndex" key="{{deliverIndex}}" wx:for="{{deliverList[orderGoodIndex]}}" wx:for-index="deliverIndex" wx:for-item="deliver" class="_tr data-v-73b2e4c8"><view class="_td data-v-73b2e4c8">{{deliver.color}}</view> <view class="_td data-v-73b2e4c8">{{deliver.size}}</view> <view class="_td data-v-73b2e4c8">{{deliver.num}}</view> <view class="_td data-v-73b2e4c8">{{deliver.deliver}}</view> <view class="_td data-v-73b2e4c8">{{deliver.remain}}</view></view></view></view> <view class="_div data-v-73b2e4c8 table" wx:if="{{isEdited}}"><view style="border: none;" class="_table data-v-73b2e4c8"><view class="_tr data-v-73b2e4c8"><view class="_th data-v-73b2e4c8">颜色</view> <view class="_th data-v-73b2e4c8">码数</view> <view class="_th data-v-73b2e4c8">总件数</view> <view class="_th data-v-73b2e4c8">待发件数</view> <view class="_th data-v-73b2e4c8">剩余待发</view></view> <view wx:key="skuIndex" key="{{skuIndex}}" wx:for="{{skuList[orderGoodIndex]}}" wx:for-index="skuIndex" wx:for-item="skuItem" class="_tr data-v-73b2e4c8"><view class="_td data-v-73b2e4c8">{{skuItem.color}}</view> <view class="_td data-v-73b2e4c8">{{skuItem.size}}</view> <view class="_td data-v-73b2e4c8">{{skuItem.num}}</view> <view class="_td data-v-73b2e4c8">{{skuItem.deliver}}</view> <view class="_td data-v-73b2e4c8">{{skuItem.remain}}</view></view></view></view> <view class="_div data-v-73b2e4c8 popups" hidden="{{!(popupsIndex === orderGoodIndex)}}"><view class="_table data-v-73b2e4c8"><view class="_tr data-v-73b2e4c8 header"><view class="_th data-v-73b2e4c8">颜色</view> <view class="_th data-v-73b2e4c8">码数</view> <view class="_th data-v-73b2e4c8">总件数</view> <view class="_th data-v-73b2e4c8 col-2">待发件数</view> <view class="_th data-v-73b2e4c8">剩余待发</view></view> <view wx:key="skuIndex" key="{{skuIndex}}" wx:for="{{lastSkuList[orderGoodIndex]}}" wx:for-index="skuIndex" wx:for-item="skuItem" class="_tr data-v-73b2e4c8"><view class="_td data-v-73b2e4c8">{{skuItem.color}}</view> <view class="_td data-v-73b2e4c8">{{skuItem.size}}</view> <view class="_td data-v-73b2e4c8">{{skuItem.num}}</view> <view class="_td data-v-73b2e4c8 col-2"><button bindtap="handleProxy" disabled="{{skuItem.deliver === 0}}" data-eventid="{{'3-'+orderGoodIndex+'-'+skuIndex}}" data-comkey="{{$k}}" class="_button data-v-73b2e4c8">-</button> <label class="_span data-v-73b2e4c8 edit">{{skuItem.deliver}}</label> <button bindtap="handleProxy" disabled="{{skuItem.deliver === skuItem.remain}}" data-eventid="{{'4-'+orderGoodIndex+'-'+skuIndex}}" data-comkey="{{$k}}" class="_button data-v-73b2e4c8">+</button></view> <view class="_td data-v-73b2e4c8">{{skuItem.remain}}</view></view></view> <view class="_div data-v-73b2e4c8 btn-group"><button type="button" class="_button data-v-73b2e4c8 cancel" bindtap="handleProxy" data-eventid="{{'5-'+orderGoodIndex}}" data-comkey="{{$k}}">取消</button> <button type="button" class="_button data-v-73b2e4c8 save" bindtap="handleProxy" data-eventid="{{'6-'+orderGoodIndex}}" data-comkey="{{$k}}">保存</button></view></view></view> <view class="_div data-v-73b2e4c8 order-details" wx:if="{{orderItem.state !== 5 && orderItem.isHasChildren !== 1&& !isRefund}}"><view class="_div data-v-73b2e4c8 detail"><view class="_div data-v-73b2e4c8 num">
        共{{orderItem.orderGoods.length}}个款，合计{{orderItem.num}}件
      </view> <view class="_div data-v-73b2e4c8 price">
        订单金额: <label class="_span data-v-73b2e4c8">{{orderItem.paid}}元</label></view></view> <view class="_div data-v-73b2e4c8 buyer">
      收货人: {{orderItem.shopAddress ? orderItem.shopAddress.name : '未设置收货人'}} 丨 手机号: {{orderItem.shopAddress ? orderItem.shopAddress.mobile : '未知号码'}}
    </view></view> <view class="_div data-v-73b2e4c8 order-details" wx:if="{{isRefund}}"><view class="_div data-v-73b2e4c8 detail"><view class="_div data-v-73b2e4c8 num">
        共{{orderItem.goodsList.length}}个款，合计{{refundOrderGoodsNum}}件
      </view> <view class="_div data-v-73b2e4c8 price">
        订单金额: <label class="_span data-v-73b2e4c8">{{orderItem.price}}元</label></view></view> <view class="_div data-v-73b2e4c8 buyer">
      收货人: {{orderItem.accountAddress ? orderItem.accountAddress.name : '未设置收货人'}} 丨 手机号: {{orderItem.accountAddress ? orderItem.accountAddress.mobile : '未知号码'}}
    </view></view> <view class="_ul data-v-73b2e4c8 childOrder" wx:if="{{orderItem.layer !== -1 && orderItem.isHasChildren}}"><view wx:key="childOrderIndex" key="{{childOrderIndex}}" bindtap="handleProxy" data-eventid="{{'7-'+childOrderIndex}}" data-comkey="{{$k}}" wx:for="{{orderItem.children}}" wx:for-index="childOrderIndex" wx:for-item="childOrder" class="_li data-v-73b2e4c8">
      子订单编号({{ childOrder.state === 1 ? '等待支付'
      : childOrder.state === 2 ? '已取消'
      : childOrder.state === 5 ? '待发货'
      : childOrder.state === 6 ? '已发货'
      : childOrder.state === 7 ? '交易成功'
      : childOrder.state === 8 ? '交易关闭'
      : childOrder.state === 9 ? '拼单中, 还差' + enoughPeopleNum + '人'
      : childOrder.state === 10 ? '审核中'
      : '未知状态'
      }}):
      {{childOrder.orderNo}}</view></view> <view class="_div data-v-73b2e4c8 button-group"><view class="_div data-v-73b2e4c8 pingUser" wx:if="{{orderItem.pingUser}}"><view wx:key="pingUserIndex" key="{{pingUserIndex}}" wx:if="{{pingUserIndex < 3}}" wx:for="{{orderItem.pingUser}}" wx:for-index="pingUserIndex" wx:for-item="pingUser" class="_i data-v-73b2e4c8" style=" {{('background-image:' + ('url(' + pingUser.head + ')') + ';')}}"></view></view> <button class="_button data-v-73b2e4c8 style1" wx:if="{{!isRefund && (orderItem.isPing !== 1 || orderItem.layer !== -1)}}" bindtap="handleProxy" data-eventid="{{'8'}}" data-comkey="{{$k}}">查看详情</button> <button class="_button data-v-73b2e4c8 style1" wx:if="{{isRefund && orderItem.layer !== -1}}" bindtap="handleProxy" data-eventid="{{'9'}}" data-comkey="{{$k}}">查看详情</button> <button class="_button data-v-73b2e4c8 style-big" wx:if="{{orderItem.isPing === 1 && orderItem.layer === -1}}" bindtap="handleProxy" data-eventid="{{'10'}}" data-comkey="{{$k}}">查看子拼团</button> <button class="_button data-v-73b2e4c8 style2" wx:if="{{orderItem.state === 6 && (orderItem.isPing !== 1 || orderItem.layer !== -1)}}" bindtap="handleProxy" data-eventid="{{'11'}}" data-comkey="{{$k}}">查看物流</button> <button class="_button data-v-73b2e4c8 style2" wx:if="{{orderItem.state === 5 && (orderItem.isPing !== 1 || orderItem.layer !== -1)}}" bindtap="handleProxy" data-eventid="{{'12'}}" data-comkey="{{$k}}">发货</button> <button class="_button data-v-73b2e4c8 style3" wx:if="{{isRefund && orderItem.state === 0}}" bindtap="handleProxy" data-eventid="{{'13'}}" data-comkey="{{$k}}">同意</button> <button class="_button data-v-73b2e4c8 style2" wx:if="{{isRefund && orderItem.state === 0}}" bindtap="handleProxy" data-eventid="{{'14'}}" data-comkey="{{$k}}">拒绝</button> <button class="_button data-v-73b2e4c8 style2" wx:if="{{isRefund && orderItem.state === 4}}" bindtap="handleProxy" data-eventid="{{'15'}}" data-comkey="{{$k}}">确认收货</button> <button class="_button data-v-73b2e4c8 style1" wx:if="{{orderItem.state === 1 && isPersonal}}" bindtap="handleProxy" data-eventid="{{'16'}}" data-comkey="{{$k}}">确认已支付</button> <button class="_button data-v-73b2e4c8 style2" wx:if="{{!isRefund && orderItem.state === 1}}" bindtap="handleProxy" data-eventid="{{'17'}}" data-comkey="{{$k}}">取消订单</button></view> <view class="_div data-v-73b2e4c8 logistics" wx:if="{{showLogistics}}"><view class="_div data-v-73b2e4c8 wrapper"><view class="_div data-v-73b2e4c8 title">请填写物流信息</view> <view class="_ul data-v-73b2e4c8 body"><view class="_li data-v-73b2e4c8">
          物流公司:
          <view class="_div data-v-73b2e4c8 selector-picker"><picker value="{{index}}" range="{{companies}}" range-key="{{'text'}}" bindchange="handleProxy" data-eventid="{{'18'}}" data-comkey="{{$k}}" class="_picker data-v-73b2e4c8"><view class="_view data-v-73b2e4c8 picker">
                {{companies[index].text}}
              </view></picker></view></view> <view class="_li data-v-73b2e4c8">
          快递单号:
          <input type="number" value="{{logisticsNo}}" bindinput="handleProxy" placeholder="请填写快递单号" data-eventid="{{'19'}}" data-comkey="{{$k}}" class="_input data-v-73b2e4c8" /></view> <view class="_li data-v-73b2e4c8">上传快递信息凭证: </view> <view class="_li data-v-73b2e4c8 upload-img"><scroll-view class="_scroll-view data-v-73b2e4c8 scroll-view " scroll-y style="height: 220rpx;"><view class="_div data-v-73b2e4c8 img-box" wx:key="index" key="{{index}}" wx:for="{{imageList}}" wx:for-index="index" wx:for-item="item"><view class="_i data-v-73b2e4c8 img" style=" {{('background-image:' + ('url(' + item + ')') + ';')}}"></view></view> <view class="_div data-v-73b2e4c8 img-box"><view class="_i data-v-73b2e4c8 add-img" bindtap="handleProxy" data-eventid="{{'20'}}" data-comkey="{{$k}}">
                + 可上传图片
              </view></view></scroll-view></view></view></view> <view class="_div data-v-73b2e4c8 checkbox"><view class="_i data-v-73b2e4c8 select-icon {{[noExpress ? 'active' : '']}}" bindtap="handleProxy" data-eventid="{{'21'}}" data-comkey="{{$k}}"></view>
      无物流信息
    </view> <view class="_div data-v-73b2e4c8 footer"><label class="_span data-v-73b2e4c8 cancel" bindtap="handleProxy" data-eventid="{{'22'}}" data-comkey="{{$k}}">取消</label> <label class="_span data-v-73b2e4c8 ok" bindtap="handleProxy" data-eventid="{{'23'}}" data-comkey="{{$k}}">确定发货</label></view></view> <view class="_div data-v-73b2e4c8 mark" hidden="{{!(showLogistics || showPopups || showReason)}}" bindtap="handleProxy" data-eventid="{{'24'}}" data-comkey="{{$k}}"></view> <view class="_div data-v-73b2e4c8 reason" hidden="{{!(showReason)}}"><view class="_div data-v-73b2e4c8 body"><view class="_div data-v-73b2e4c8 header">填写拒绝理由</view> <textarea value="{{content}}" bindinput="handleProxy" data-eventid="{{'25'}}" data-comkey="{{$k}}" class="_textarea data-v-73b2e4c8" /></view> <view class="_div data-v-73b2e4c8 footer"><label class="_span data-v-73b2e4c8 button cancel" bindtap="handleProxy" data-eventid="{{'26'}}" data-comkey="{{$k}}">取消</label> <label class="_span data-v-73b2e4c8 button ok" bindtap="handleProxy" data-eventid="{{'27'}}" data-comkey="{{$k}}">确定</label></view></view> <i-modal title="请检查..." visible="{{visible1}}" bindok="handleProxy" bindcancel="handleProxy" data-eventid="{{'28'}}" data-comkey="{{$k}}" class="_i-modal data-v-73b2e4c8"><view class="_div data-v-73b2e4c8 visible">未编辑待发货数量</view></i-modal> <i-modal visible="{{visible2}}" bindok="handleProxy" bindcancel="handleProxy" data-eventid="{{'29'}}" data-comkey="{{$k}}" class="_i-modal data-v-73b2e4c8"><view class="_div data-v-73b2e4c8 visible">
      是否同意退款金额<label class="_span data-v-73b2e4c8 red">￥{{orderItem.price}}元</label>给<label class="_span data-v-73b2e4c8 red">{{orderItem.accountAddress ? orderItem.accountAddress.name : '未设置收货人'}}</label>?
    </view></i-modal> <i-modal visible="{{visible3}}" bindok="handleProxy" bindcancel="handleProxy" data-eventid="{{'30'}}" data-comkey="{{$k}}" class="_i-modal data-v-73b2e4c8"><view class="_div data-v-73b2e4c8 visible">确定取消订单？</view></i-modal> <i-modal title="是否确认收货？" visible="{{visible4}}" bindok="handleProxy" bindcancel="handleProxy" data-eventid="{{'31'}}" data-comkey="{{$k}}" class="_i-modal data-v-73b2e4c8"><view class="_div data-v-73b2e4c8 visible2">将自动退还金额<label class="_span data-v-73b2e4c8 red">￥{{orderItem.price}}元</label>给<label class="_span data-v-73b2e4c8 red">{{orderItem.accountAddress ? orderItem.accountAddress.name : '未设置收货人'}}</label></view></i-modal> <i-modal visible="{{visible5}}" bindok="handleProxy" bindcancel="handleProxy" data-eventid="{{'32'}}" data-comkey="{{$k}}" class="_i-modal data-v-73b2e4c8"><view class="_div data-v-73b2e4c8 visible">是否确认已收款?</view></i-modal> <i-message id="message" class="_i-message data-v-73b2e4c8"></i-message></view></template>