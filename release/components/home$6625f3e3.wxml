<template name="home$6625f3e3"><view class="_div data-v-68f90aa0 wrapper"><view class="_div data-v-68f90aa0 receiver"><view class="_div data-v-68f90aa0 left-icon"></view> <view class="_div data-v-68f90aa0 right-info"><view class="_div data-v-68f90aa0 header"><label class="_span data-v-68f90aa0 name">收货人: {{orderAddress.name || '未知联系人'}}</label> <label class="_span data-v-68f90aa0 mobile">{{orderAddress.mobile || '未知号码'}}</label></view> <view class="_div data-v-68f90aa0 address">收货地址: {{orderAddressValue + orderAddress.address}}</view> <view class="_div data-v-68f90aa0 remark">备注: {{remark}}</view></view></view> <view class="_div data-v-68f90aa0 orderDetail"><view class="_div data-v-68f90aa0 header"><label class="_span data-v-68f90aa0 left"><view class="_i data-v-68f90aa0 icon"></view>{{shopName}}
        </label> <label class="_span data-v-68f90aa0 right">{{
          state === 1 ? '等待支付'
          : state === 2 ? '已取消'
          : state === 5 ? '待发货'
          : state === 6 ? '已发货'
          : state === 7 ? '交易成功'
          : state === 8 ? '交易关闭'
          : state === 9 ? '拼单中'
          : state === 10 ? '审核中'
          : '未知状态'
        }}</label></view> <view class="_div data-v-68f90aa0 goods-info" wx:key="goodsIndex" key="{{goodsIndex}}" wx:for="{{goodsList}}" wx:for-index="goodsIndex" wx:for-item="goods"><view class="_div data-v-68f90aa0 goods-body"><view class="_i data-v-68f90aa0 goods-img" style=" {{('background-image:' + ('url(' + goods.image + ')') + ';')}}"></view> <view class="_div data-v-68f90aa0 goods-message"><label class="_span data-v-68f90aa0 name">{{goods.name}}</label> <label class="_span data-v-68f90aa0"><view class="_p data-v-68f90aa0 stall">档口名称: {{goods.stallInfo3 || '未知档口'}}</view> <view class="_p data-v-68f90aa0 futures">期货: {{goods.delivery || '未知期货'}}</view></label> <view class="_div data-v-68f90aa0 footer"><view class="_div data-v-68f90aa0 box"><label wx:key="skuIndex" key="{{skuIndex}}" wx:for="{{skuList[goodsIndex]}}" wx:for-index="skuIndex" wx:for-item="skuItem" class="_span data-v-68f90aa0">{{skuItem.color}}色: {{skuItem.size}}码丨{{skuItem.num}}件</label></view> <button hidden="{{!(state === 5)}}" bindtap="handleProxy" data-eventid="{{'0-'+goodsIndex}}" data-comkey="{{$k}}" class="_button data-v-68f90aa0">编辑</button></view></view></view> <view class="_div data-v-68f90aa0 table" wx:if="{{state == 5 && isHasDeliver && !isEdited}}"><view style="border: none;" class="_table data-v-68f90aa0"><view class="_tr data-v-68f90aa0"><view class="_th data-v-68f90aa0">颜色</view> <view class="_th data-v-68f90aa0">码数</view> <view class="_th data-v-68f90aa0">总件数</view> <view class="_th data-v-68f90aa0">待发件数</view> <view class="_th data-v-68f90aa0">剩余待发</view></view> <view wx:key="deliverIndex" key="{{deliverIndex}}" wx:for="{{deliverList[goodsIndex]}}" wx:for-index="deliverIndex" wx:for-item="deliver" class="_tr data-v-68f90aa0"><view class="_td data-v-68f90aa0">{{deliver.color}}</view> <view class="_td data-v-68f90aa0">{{deliver.size}}</view> <view class="_td data-v-68f90aa0">{{deliver.num}}</view> <view class="_td data-v-68f90aa0">{{deliver.deliver}}</view> <view class="_td data-v-68f90aa0">{{deliver.remain}}</view></view></view></view> <view class="_div data-v-68f90aa0 table" wx:if="{{isEdited}}"><view style="border: none;" class="_table data-v-68f90aa0"><view class="_tr data-v-68f90aa0"><view class="_th data-v-68f90aa0">颜色</view> <view class="_th data-v-68f90aa0">码数</view> <view class="_th data-v-68f90aa0">总件数</view> <view class="_th data-v-68f90aa0">待发件数</view> <view class="_th data-v-68f90aa0">剩余待发</view></view> <view wx:key="skuIndex" key="{{skuIndex}}" wx:for="{{skuList[goodsIndex]}}" wx:for-index="skuIndex" wx:for-item="skuItem" class="_tr data-v-68f90aa0"><view class="_td data-v-68f90aa0">{{skuItem.color}}</view> <view class="_td data-v-68f90aa0">{{skuItem.size}}</view> <view class="_td data-v-68f90aa0">{{skuItem.num}}</view> <view class="_td data-v-68f90aa0">{{skuItem.deliver}}</view> <view class="_td data-v-68f90aa0">{{skuItem.remain}}</view></view></view></view> <view class="_div data-v-68f90aa0 total">
        共{{goods.countNum}}件商品, 合计: <view class="_strong data-v-68f90aa0">{{goods.countPrice}}元</view></view> <view class="_div data-v-68f90aa0 popups" hidden="{{!(popupsIndex === goodsIndex)}}"><view class="_table data-v-68f90aa0"><view class="_tr data-v-68f90aa0 header"><view class="_th data-v-68f90aa0">颜色</view> <view class="_th data-v-68f90aa0">码数</view> <view class="_th data-v-68f90aa0">总件数</view> <view class="_th data-v-68f90aa0 col-2">待发件数</view> <view class="_th data-v-68f90aa0">剩余待发</view></view> <view wx:key="skuIndex" key="{{skuIndex}}" wx:for="{{lastSkuList[goodsIndex]}}" wx:for-index="skuIndex" wx:for-item="skuItem" class="_tr data-v-68f90aa0"><view class="_td data-v-68f90aa0">{{skuItem.color}}</view> <view class="_td data-v-68f90aa0">{{skuItem.size}}</view> <view class="_td data-v-68f90aa0">{{skuItem.num}}</view> <view class="_td data-v-68f90aa0 col-2"><button bindtap="handleProxy" disabled="{{skuItem.deliver === 0}}" data-eventid="{{'1-'+goodsIndex+'-'+skuIndex}}" data-comkey="{{$k}}" class="_button data-v-68f90aa0">-</button> <label class="_span data-v-68f90aa0 edit">{{skuItem.deliver}}</label> <button bindtap="handleProxy" disabled="{{skuItem.deliver === skuItem.remain}}" data-eventid="{{'2-'+goodsIndex+'-'+skuIndex}}" data-comkey="{{$k}}" class="_button data-v-68f90aa0">+</button></view> <view class="_td data-v-68f90aa0">{{skuItem.remain}}</view></view></view> <view class="_div data-v-68f90aa0 btn-group"><button type="button" class="_button data-v-68f90aa0 cancel" bindtap="handleProxy" data-eventid="{{'3-'+goodsIndex}}" data-comkey="{{$k}}">取消</button> <button type="button" class="_button data-v-68f90aa0 save" bindtap="handleProxy" data-eventid="{{'4-'+goodsIndex}}" data-comkey="{{$k}}">保存</button></view></view></view></view> <view class="_ul data-v-68f90aa0 childOrder" wx:if="{{childrenOrder.length !== 0}}"><view wx:key="childOrderIndex" key="{{childOrderIndex}}" bindtap="handleProxy" data-eventid="{{'5-'+childOrderIndex}}" data-comkey="{{$k}}" wx:for="{{childrenOrder}}" wx:for-index="childOrderIndex" wx:for-item="childOrder" class="_li data-v-68f90aa0">
      子订单编号({{
      childOrder.state === 1 ? '等待支付'
      : childOrder.state === 2 ? '已取消'
      : childOrder.state === 5 ? '待发货'
      : childOrder.state === 6 ? '已发货'
      : childOrder.state === 7 ? '交易成功'
      : childOrder.state === 8 ? '交易关闭'
      : childOrder.state === 9 ? '拼单中'
      : childOrder.state === 10 ? '审核中'
      : '未知状态'
      }}):
      {{childOrder.orderNo}}</view></view> <view class="_ul data-v-68f90aa0 orderPrice"><view class="_li data-v-68f90aa0"><label class="_span data-v-68f90aa0 title">商品总价</label> <label class="_span data-v-68f90aa0 num">￥{{totalPrice}}</label></view> <view wx:if="{{couponMoney}}" class="_li data-v-68f90aa0"><label class="_span data-v-68f90aa0 title">优惠券抵扣</label> <label class="_span data-v-68f90aa0 num">- ￥{{couponMoney}}</label></view> <view class="_li data-v-68f90aa0"><label class="_span data-v-68f90aa0 title">运费</label> <label class="_span data-v-68f90aa0 num">+ ￥{{freight}}</label></view></view> <view class="_ul data-v-68f90aa0 orderNo"><view wx:if="{{parentNo}}" class="_li data-v-68f90aa0">父订单编号: {{parentNo}}</view> <view class="_li data-v-68f90aa0">订单编号: {{orderNo}}</view> <view class="_li data-v-68f90aa0">下单时间: {{createTime}}</view> <view wx:if="{{payTime}}" class="_li data-v-68f90aa0">支付时间: {{payTime}}</view> <view wx:if="{{pingTime}}" class="_li data-v-68f90aa0">拼团时间: {{pingTime}}</view> <view wx:if="{{deliverTime}}" class="_li data-v-68f90aa0">发货时间: {{deliverTime}}</view> <view wx:if="{{receiptTime}}" class="_li data-v-68f90aa0">确认收货时间: {{receiptTime}}</view></view> <view class="_div data-v-68f90aa0 white-block" style="width: 100%; height: 100px; background-color: #fff;"></view> <view class="_div data-v-68f90aa0 btn"><view class="_div data-v-68f90aa0 pingUser" wx:if="{{pingUser}}"><view wx:key="pingUserIndex" key="{{pingUserIndex}}" wx:if="{{pingUserIndex < 3}}" wx:for="{{pingUser}}" wx:for-index="pingUserIndex" wx:for-item="pingU" class="_i data-v-68f90aa0" style=" {{('background-image:' + ('url(' + pingU.head + ')') + ';')}}"></view></view> <button wx:if="{{state === 5}}" bindtap="handleProxy" data-eventid="{{'6'}}" data-comkey="{{$k}}" class="_button data-v-68f90aa0">发货</button> <button wx:if="{{state === 6 && isHasChildren !== 1}}" bindtap="handleProxy" data-eventid="{{'7'}}" data-comkey="{{$k}}" class="_button data-v-68f90aa0">查看物流</button> <button wx:if="{{state === 4}}" class="_button data-v-68f90aa0">确认收货</button> <button wx:if="{{state === 1 && isPersonal === 0}}" class="_button data-v-68f90aa0">确认已支付</button> <button wx:if="{{state === 1}}" bindtap="handleProxy" data-eventid="{{'8'}}" data-comkey="{{$k}}" class="_button data-v-68f90aa0">取消订单</button></view> <view class="_div data-v-68f90aa0 logistics" wx:if="{{showLogistics}}"><view class="_div data-v-68f90aa0 wrapper"><view class="_div data-v-68f90aa0 title">请填写物流信息</view> <view class="_ul data-v-68f90aa0 body"><view class="_li data-v-68f90aa0">
          物流公司:
          <view class="_div data-v-68f90aa0 selector-picker"><picker mode="selector" value="{{index}}" range="{{companies}}" range-key="{{'text'}}" bindchange="handleProxy" data-eventid="{{'9'}}" data-comkey="{{$k}}" class="_picker data-v-68f90aa0"><view class="_div data-v-68f90aa0 picker">
                {{companies[index].text}}
              </view></picker></view></view> <view class="_li data-v-68f90aa0">
          快递单号:
          <input type="number" value="{{logisticsNo}}" bindinput="handleProxy" placeholder="请填写快递单号" data-eventid="{{'10'}}" data-comkey="{{$k}}" class="_input data-v-68f90aa0" /></view> <view class="_li data-v-68f90aa0">上传快递信息凭证: </view> <view class="_li data-v-68f90aa0 upload-img"><scroll-view class="_scroll-view data-v-68f90aa0 scroll-view" scroll-y style="height: 220rpx;"><view class="_div data-v-68f90aa0 img-box" wx:key="index" key="{{index}}" wx:for="{{imageList}}" wx:for-index="index" wx:for-item="item"><view class="_i data-v-68f90aa0 img" style=" {{('background-image:' + ('url(' + item + ')') + ';')}}"></view></view> <view class="_div data-v-68f90aa0 img-box"><view class="_i data-v-68f90aa0 add-img" bindtap="handleProxy" data-eventid="{{'11'}}" data-comkey="{{$k}}">
                + 可上传图片
              </view></view></scroll-view></view> <view class="_li data-v-68f90aa0 checkbox"><view class="_i data-v-68f90aa0 select-icon {{[noExpress ? 'active' : '']}}" bindtap="handleProxy" data-eventid="{{'12'}}" data-comkey="{{$k}}"></view>
          无物流信息
        </view></view> <view class="_div data-v-68f90aa0 footer"><label class="_span data-v-68f90aa0 cancel" bindtap="handleProxy" data-eventid="{{'13'}}" data-comkey="{{$k}}">取消</label> <label class="_span data-v-68f90aa0 ok" bindtap="handleProxy" data-eventid="{{'14'}}" data-comkey="{{$k}}">确定发货</label></view></view></view> <view class="_div data-v-68f90aa0 mark" hidden="{{!(showLogistics || showPopups)}}" bindtap="handleProxy" data-eventid="{{'15'}}" data-comkey="{{$k}}"></view> <i-modal title="请检查..." visible="{{visible1}}" bindok="handleProxy" bindcancel="handleProxy" data-eventid="{{'16'}}" data-comkey="{{$k}}" class="_i-modal data-v-68f90aa0"><view class="_div data-v-68f90aa0">未编辑待发货数量</view></i-modal> <i-modal visible="{{visible3}}" bindok="handleProxy" bindcancel="handleProxy" data-eventid="{{'17'}}" data-comkey="{{$k}}" class="_i-modal data-v-68f90aa0"><view class="_div data-v-68f90aa0 visible">确定取消订单？</view></i-modal> <i-modal visible="{{visible4}}" bindok="handleProxy" bindcancel="handleProxy" data-eventid="{{'18'}}" data-comkey="{{$k}}" class="_i-modal data-v-68f90aa0"><view class="_div data-v-68f90aa0 visible">确定关闭订单？</view></i-modal> <i-message id="message" class="_i-message data-v-68f90aa0"></i-message></view></template>