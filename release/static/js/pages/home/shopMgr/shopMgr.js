global.webpackJsonp([1],{"+XT3":function(t,s,e){"use strict";var i=e("woOf"),a=e.n(i),o=e("qTHA"),n=e("eRcT"),c=e("x5d0"),r=e("oH/4"),l=e("PM7l"),h=e("s0gn"),d=e("061O"),u=e("i4Ud"),p=e("IbyF"),v=e("Zm3I");s.a={components:{collage:n.a,selling:c.a,hot:u.a,discount:r.a,stocking:l.a,news:d.a,group:h.a,all:p.a},data:function(){return{selectedId:3,tag:6,topContainerHeight:0,navData:[{id:1,title:"全部"},{id:2,title:"出售中"},{id:3,title:"仓库中"},{id:4,title:"新品上新"},{id:5,title:"爆款精选"},{id:6,title:"特价折扣"},{id:7,title:"拼团优惠"},{id:8,title:"搭配专区"}]}},methods:{handleNav:function(t){this.tag=t},toRoute:function(t,s){this.$router.push({path:t,query:s})},handleZanTabChange:function(t){var s=t.mp.detail;s!==this.selectedId&&(this.selectedId=s)}},onReachBottom:function(){v.a.$emit("onReachBottom")},onPullDownRefresh:function(){v.a.$emit("onPullDownRefresh")},mounted:function(){var t=this,s=o.a.createSelectorQuery();s.select("#topContainer").boundingClientRect(),s.exec(function(s){t.topContainerHeight=s[0].height})},onUnload:function(){a()(this,this.$options.data())}}},"/U/D":function(t,s,e){"use strict";var i=e("woOf"),a=e.n(i),o=e("Xxa5"),n=e.n(o),c=e("exGp"),r=e.n(c),l=e("qTHA"),h=e("imcP"),d=e("90m7"),u=e("yHWc"),p=e("P6JL");s.a={mixins:[d.a,p.a],components:{scard:h.a,selsearch:u.a},computed:{},data:function(){return{groupTag:2,showUp:!1,asceSale:!0,ascePrice:!0,tag:1,showRight1:!1,edit:!1,allCheck:!1,shopNum:0,shopList:[],showLoad:!1,canLoad:!0,pageSize:10,type:1,selIds:[],state:1,goodsIds:[]}},methods:{searchShopGroupItem:function(){var t=this,s={pageNumber:1};s.pageSize=this.pageSize,s.ob=1,s.labelId=this.groupTag,s.state=this.state,console.log(s),this.shopList=[],this.$API.searchShopGroup(s).then(function(s){t.shopList=s.data.list})},deleteItem:function(t){var s=this;console.log("id=====",t),this.shopList.forEach(function(e,i){e.id===t&&s.shopList.splice(i,1)})},toShow:function(t){var s=this;if("edit"===t)return this[t]=!0,void this.selIds.forEach(function(t,e){s.selIds[e]="-1"});this.selIds.every(function(t){return"-1"==t})?l.a.showToast({title:"请先选择商品",icon:"none"}):this[t]=!0},toggleEdit:function(){this.edit=!this.edit},handleTag:function(t){var s=this;return r()(n.a.mark(function e(){var i,a;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s.tag=t,i=1,s.shopNum=0,s.canLoad=!0,s.showLoad=!1,2===t&&(s.asceSale=!s.asceSale,i=s.asceSale?2:3),4===t&&(s.ascePrice=!s.ascePrice,i=s.ascePrice?4:5),5!==t){e.next=10;break}return s.toggleRight1(),e.abrupt("return");case 10:return s.type=i,e.next=13,s.getNextPage({ob:i,state:s.state,labelId:s.groupTag});case 13:a=e.sent,s.shopList=a.data.list,s.shopList.forEach(function(t,e){s.selIds[e]="-1"}),a.data.list.length<s.pageSize&&(s.canLoad=!1);case 17:case"end":return e.stop()}},e,s)}))()},toggleRight1:function(){this.showRight1=!this.showRight1},searchShop:function(t){return t.pageSize=this.pageSize,this.$API.searchShopGroup(t)},getNextPage:function(t){return this.shopNum++,5==this.tag&&(t=a()(t,this.selParam)),t.pageNumber=this.shopNum,this.searchShop(t)},lower:function(t){var s=this;if(console.log(t),this.canLoad){if(!this.showLoad){this.showLoad=!0,l.a.showLoading({title:"加载中"});var e=this;this.getNextPage({ob:this.type,state:this.state}).then(function(t){e.shopList=e.shopList.concat(t.data.list),e.shopList.forEach(function(t,e){s.selIds[e]="-1"}),t&&(e.showLoad=!1),e.shopList.length===t.data.totalRow&&(e.canLoad=!1),l.a.hideLoading()})}}else l.a.showToast({title:"没有更多数据了",icon:"none",duration:1500})},comSearch:function(t){var s=this;return r()(n.a.mark(function e(){var i;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s.toggleRight1(),s.selParam=t,e.next=4,s.getNextPage({ob:1,state:s.state,labelId:s.groupTag});case 4:i=e.sent,s.shopList=i.data.list,s.shopList.forEach(function(t,e){s.selIds[e]="-1"}),i.data.list.length<s.pageSize&&(s.canLoad=!1);case 8:case"end":return e.stop()}},e,s)}))()},switchSel:function(t,s,e){console.log(t,s),"-1"===this.selIds[e]?this.$set(this.selIds,e,t):this.$set(this.selIds,e,"-1"),console.log(this.selIds)},selUp:function(t){var s=this;return r()(n.a.mark(function e(){return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s[t]=!s[t],!s.selIds.every(function(t){return"-1"==t})){e.next=4;break}return l.a.showToast({title:"请先选择商品",icon:"none"}),e.abrupt("return");case 4:return s.selIds=s.selIds.filter(function(t){return"-1"!==t}),console.log(s.selIds),e.next=8,s.$API.switchShop({goodsIds:s.selIds.join(","),state:0==s.state?1:0});case 8:s.shopList.forEach(function(t,e){s.selIds.forEach(function(i){t.id===i&&(s.shopList.splice(e,1),s.selIds.splice(e,1))})}),s.shopList.forEach(function(t,e){s.selIds[e]="-1"}),s.$success("下架成功！");case 12:case"end":return e.stop()}},e,s)}))()},toGroup:function(){if(this.selIds.every(function(t){return"-1"===t}))return this.handleError("请至少选择一件商品！");this.toRoute("home/shopMgr/classifyAll",{type:0,ids:this.selIds.join(",")})}},mounted:function(){var t=this;return r()(n.a.mark(function s(){var e;return n.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return console.log(t.shopList),t.shopNum=0,s.next=4,t.getNextPage({ob:1,state:t.state,labelId:t.groupTag});case 4:e=s.sent,console.log(e),t.shopList=e.data.list,t.shopList.forEach(function(s,e){t.selIds[e]="-1"}),e.data.list.length<t.pageSize&&(t.canLoad=!1),console.log(t.shopList);case 10:case"end":return s.stop()}},s,t)}))()}}},"061O":function(t,s,e){"use strict";var i=e("d8s+"),a=e("70PY");var o=function(t){e("KBf5")},n=e("ybqe")(i.a,a.a,o,"data-v-46add2f9",null);s.a=n.exports},"49G/":function(t,s){},"4i1s":function(t,s,e){"use strict";var i={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"home"},[e("div",{staticClass:"sort-select"},[e("div",{staticClass:"top-nav"},[e("ul",[e("li",{class:[1===t.tag&&"nav-active"],attrs:{eventid:"0"},on:{click:function(s){t.handleTag(1)}}},[t._v("\n          综合\n        ")]),t._v(" "),e("li",{class:[2===t.tag&&"nav-active"],attrs:{eventid:"1"},on:{click:function(s){t.handleTag(2)}}},[t._v("\n          销量\n          "),e("div",{staticClass:"sort-box"},[e("i",{staticClass:"sort-top",class:t.asceSale&&"sort-active"}),t._v(" "),e("i",{staticClass:"sort-bottom",class:!t.asceSale&&"sort-active"})],1)]),t._v(" "),e("li",{class:[4===t.tag&&"nav-active"],attrs:{eventid:"2"},on:{click:function(s){t.handleTag(4)}}},[t._v("\n          价格\n          "),e("div",{staticClass:"sort-box"},[e("i",{staticClass:"sort-top",class:t.ascePrice&&"sort-active"}),t._v(" "),e("i",{staticClass:"sort-bottom",class:!t.ascePrice&&"sort-active"})],1)]),t._v(" "),e("li",{class:[5===t.tag&&"nav-active"],attrs:{eventid:"3"},on:{click:function(s){t.handleTag(5)}}},[t._v("\n          筛选\n          "),e("div",{staticClass:"sort-box"},[e("i",{staticClass:"option-icon"})],1)])],1)],1),t._v(" "),e("div",{attrs:{eventid:"5"},on:{scrolltolower:t.lower}},[e("div",{staticClass:"box"},[t._l(t.shopList,function(s,i){return e("p",{key:i},[e("scard",{ref:"scard",refInFor:!0,attrs:{shop:s,edit:t.edit,act:0==s.state?"上架":"下架",eventid:"4-"+i,mpcomid:"0-"+i},on:{deleteItem:t.deleteItem}})],1)}),t._v(" "),e("div",{staticClass:"white-block"})],2)])]),t._v(" "),e("i-drawer",{attrs:{mode:"right",visible:t.showRight1,eventid:"7",mpcomid:"2"},on:{close:t.toggleRight1}},[e("selsearch",{attrs:{eventid:"6",mpcomid:"1"},on:{comSearch:t.comSearch}})],1),t._v(" "),t.edit?t._e():e("div",{staticClass:"footer"},[e("p",{staticClass:"style2",attrs:{eventid:"8"},on:{click:function(s){t.toRoute("home/addShop/editShop")}}},[t._v("添加商品")])],1)],1)},staticRenderFns:[]};s.a=i},"4ilh":function(t,s){},"6mua":function(t,s,e){"use strict";var i=e("Xxa5"),a=e.n(i),o=e("exGp"),n=e.n(o),c=e("mvHQ"),r=e.n(c),l=e("90m7"),h=this;s.a={mixins:[l.a],props:{edit:{type:Boolean,default:!1},shop:{type:Object},act:{type:String,default:"下架"}},watch:{edit:function(t,s){h.edit=!h.edit,console.log(h.edit)}},data:function(){return{check:!1,visible4:!1,visible2:!1,visible1:!1,actions4:[{name:"编辑"},{name:"下架"},{name:"取消"}],pingPrie:""}},computed:{},methods:{handleActionClick:function(){var t=this;wx.showActionSheet({itemList:["编辑","下架"],success:function(s){switch(s.tapIndex){case 0:t.toRoute("home/shopMgr/collage/collageMsg",{pingInfo:r()(t.shop.ping),isEdit:!0});break;case 1:t.visible2=!0}}})},comfirmGPrice:function(t,s){var e=this;this.toClose(t),s?this.$API.updateDisGoods({goodsId:this.shop.id,disPrice:s}).then(function(t){1===t.code&&(e.shop.disPrice=s,e.$Toast({content:"修改成功",type:"success"}))}):this.$Toast({content:"折扣价格不能为空",type:"warning"})},select:function(){this.check?this.check=!1:this.check=!0},handleClick4:function(t){var s=t.mp.detail.index;this.visible4=!1,0===s?this.toRoute("home/shopMgr/collage/collageMsg",{pingInfo:r()(this.shop.ping),isEdit:!0}):1===s?this.visible2=!0:2===s&&this.toClose("visible4")},comfirmDel:function(t){var s=this;return n()(a.a.mark(function e(){var i;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s[t]=!1,i=0,"下架"!=s.act&&(i=1),e.next=5,s.$API.switchShop({goodsIds:s.shop.id,state:i});case 5:s.show=!1,s.$success(s.act+"成功！"),setTimeout(function(){s.$emit("deleteItem",s.shop.id)},1e3);case 8:case"end":return e.stop()}},e,s)}))()}},mounted:function(){this.actions4[1].name=this.act}}},"70PY":function(t,s,e){"use strict";var i={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"home"},[e("div",{staticClass:"sort-select"},[e("div",{staticClass:"top-nav"},[e("ul",[e("li",{class:[1===t.tag&&"nav-active"],attrs:{eventid:"0"},on:{click:function(s){t.handleTag(1)}}},[t._v("综合")]),t._v(" "),e("li",{class:[2===t.tag&&"nav-active"],attrs:{eventid:"1"},on:{click:function(s){t.handleTag(2)}}},[t._v("销量"),e("div",{staticClass:"sort-box"},[e("i",{staticClass:"sort-top",class:t.asceSale&&"sort-active"}),e("i",{staticClass:"sort-bottom",class:!t.asceSale&&"sort-active"})],1)]),t._v(" "),e("li",{class:[4===t.tag&&"nav-active"],attrs:{eventid:"2"},on:{click:function(s){t.handleTag(4)}}},[t._v("价格"),e("div",{staticClass:"sort-box"},[e("i",{staticClass:"sort-top",class:t.ascePrice&&"sort-active"}),e("i",{staticClass:"sort-bottom",class:!t.ascePrice&&"sort-active"})],1)]),t._v(" "),e("li",{class:[5===t.tag&&"nav-active"],attrs:{eventid:"3"},on:{click:function(s){t.handleTag(5)}}},[t._v("筛选"),e("div",{staticClass:"sort-box"},[e("i",{staticClass:"option-icon"})],1)])],1)],1),t._v(" "),e("div",[e("div",{staticClass:"box"},[t._l(t.shopList,function(s,i){return s.del?t._e():e("p",{key:i},[e("scard",{key:i,ref:"scard",refInFor:!0,attrs:{shop:s,edit:t.edit,selectedId:t.selIds[i],index:i,eventid:"4-"+i,mpcomid:"0-"+i},on:{switchSel:t.switchSel,deleteItem:t.deleteItem,searchShopGroupItem:t.searchShopGroupItem}})],1)}),t._v(" "),e("div",{staticClass:"white-block"})],2)]),t._v(" "),e("i-drawer",{attrs:{mode:"right",visible:t.showRight1,eventid:"6",mpcomid:"2"},on:{close:t.toggleRight1}},[e("selsearch",{attrs:{eventid:"5",mpcomid:"1"},on:{comSearch:t.comSearch}})],1)],1),t._v(" "),e("i-modal",{attrs:{visible:t.showUp,eventid:"7",mpcomid:"3"},on:{ok:function(s){t.selUp("showUp")},cancel:function(s){t.toClose("showUp")}}},[e("div",{staticClass:"m_tips"},[t._v("确定要批量下架？")])]),t._v(" "),t.edit?e("div",{staticClass:"footer"},[e("p",{staticClass:"style1",attrs:{eventid:"10"},on:{click:function(s){t.toShow("showUp")}}},[t._v("下架")]),t._v(" "),e("p",{staticClass:"style2",attrs:{eventid:"11"},on:{click:t.toGroup}},[t._v("分组")]),t._v(" "),e("p",{staticClass:"style3",attrs:{eventid:"12"},on:{click:function(s){t.toggleEdit()}}},[t._v("完成")])],1):e("div",{staticClass:"footer"},[e("p",{staticClass:"style2",attrs:{eventid:"8"},on:{click:function(s){t.toShow("edit")}}},[t._v("批量处理")]),t._v(" "),e("p",{staticClass:"style3",attrs:{eventid:"9"},on:{click:function(s){t.toRoute("home/addShop/editShop")}}},[t._v("添加商品")])],1),t._v(" "),e("i-message",{attrs:{id:"message",mpcomid:"4"}})],1)},staticRenderFns:[]};s.a=i},"7yDB":function(t,s){},C8cP:function(t,s,e){"use strict";var i=e("woOf"),a=e.n(i),o=e("Xxa5"),n=e.n(o),c=e("exGp"),r=e.n(c),l=e("qTHA"),h=e("imcP"),d=e("90m7"),u=e("yHWc"),p=(e("Zm3I"),e("P6JL"));s.a={mixins:[d.a,p.a],components:{scard:h.a,selsearch:u.a},computed:{},data:function(){return{asceSale:!0,ascePrice:!0,tag:1,showRight1:!1,edit:!1,allCheck:!1,shopNum:0,shopList:[],showLoad:!1,canLoad:!0,pageSize:10,type:1}},methods:{deleteItem:function(t){var s=this;return r()(n.a.mark(function e(){var i;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s.shopList=[],console.log("id=====",t),s.shopNum=0,e.next=5,s.getNextPage({ob:1});case 5:i=e.sent,s.shopList=i.data.list;case 7:case"end":return e.stop()}},e,s)}))()},handleTag:function(t){var s=this;return r()(n.a.mark(function e(){var i,a;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s.tag=t,i=1,s.shopNum=0,s.canLoad=!0,s.showLoad=!1,2===t&&(s.asceSale=!s.asceSale,i=s.asceSale?2:3),4===t&&(s.ascePrice=!s.ascePrice,i=s.ascePrice?4:5),5!==t){e.next=10;break}return s.toggleRight1(),e.abrupt("return");case 10:return s.type=i,e.next=13,s.getNextPage({ob:i});case 13:a=e.sent,s.shopList=a.data.list,a.data.list.length<s.pageSize&&(s.canLoad=!1);case 16:case"end":return e.stop()}},e,s)}))()},toggleRight1:function(){this.showRight1=!this.showRight1},toOpen:function(t){this[t]=!0},toClose:function(t){this[t]=!1},selectAll:function(){this.allCheck=!this.allCheck,this.$refs.scard.selectAll(this.allCheck)},searchShop:function(t){return t.pageSize=this.pageSize,this.$API.searchShopGroup(t)},getNextPage:function(t){return this.shopNum++,5==this.tag&&(t=a()(t,this.selParam)),t.pageNumber=this.shopNum,this.searchShop(t)},lower:function(t){if(this.canLoad){if(!this.showLoad){this.showLoad=!0,l.a.showLoading({title:"加载中"});var s=this;this.getNextPage({ob:this.type,state:this.state}).then(function(t){s.shopList=s.shopList.concat(t.data.list),t&&(s.showLoad=!1),s.shopList.length===t.data.totalRow&&(s.canLoad=!1)}).finally(function(){l.a.hideLoading()})}}else l.a.showToast({title:"没有更多数据了",icon:"none",duration:1500})},comSearch:function(t){var s=this;return r()(n.a.mark(function e(){var i;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s.toggleRight1(),s.selParam=t,e.next=4,s.getNextPage({ob:1});case 4:i=e.sent,s.shopList=i.data.list,i.data.list.length<s.pageSize&&(s.canLoad=!1);case 7:case"end":return e.stop()}},e,s)}))()}},mounted:function(){var t=this;return r()(n.a.mark(function s(){var e;return n.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t.shopNum=0,s.next=3,t.getNextPage({ob:1});case 3:e=s.sent,t.shopList=e.data.list,e.data.list.length<t.pageSize&&(t.canLoad=!1);case 6:case"end":return s.stop()}},s,t)}))()}}},D5Ci:function(t,s,e){"use strict";var i=e("6mua"),a=e("RGDX");var o=function(t){e("vTOk")},n=e("ybqe")(i.a,a.a,o,"data-v-fd06da0e",null);s.a=n.exports},EmET:function(t,s){},EmSM:function(t,s){},HUAE:function(t,s,e){"use strict";var i={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"order-shop-card"},[e("div",{staticClass:"item-card"},[t.edit?e("i",{staticClass:"select",class:[t.check?"active":"close"],attrs:{eventid:"0"},on:{click:t.select}}):t._e(),t._v(" "),e("i",{staticClass:"img",style:{backgroundImage:"url("+t.shop.image+")"}}),t._v(" "),e("div",{staticClass:"desc"},[e("p",{staticClass:"title"},[t._v(t._s(t.shop.name))]),t._v(" "),e("span",{staticClass:"stall"},[t._v("档口:"+t._s(t.shop.stallInfo1+"-"+t.shop.stallInfo2+"-"+t.shop.stallInfo3))]),t._v(" "),e("span",{staticClass:"count"},[e("p",[t._v("货期:"+t._s(t.shop.delivery)+"丨销量:"+t._s(t.shop.sellCount))])],1),t._v(" "),e("p",{staticClass:"collage_price"},[t._v("折扣价: "+t._s(t.shop.disPrice))]),t._v(" "),e("p",{staticClass:"price"},[e("span",{staticClass:"countPrice"},[t._v("售价:￥"+t._s(t.shop.sellPrice))]),t._v(" "),e("span",{staticClass:"sell"},[t._v("   利润:￥"+t._s(t.shop.profit))]),t._v(" "),e("span",{staticClass:"action",attrs:{eventid:"1"},on:{click:t.handleActionClick}},[e("span",{staticClass:"more-icon"},[e("span",{staticClass:"dot"}),t._v(" "),e("span",{staticClass:"dot"}),t._v(" "),e("span",{staticClass:"dot"})])])])],1)],1),t._v(" "),e("i-modal",{attrs:{visible:t.visible1,eventid:"3",mpcomid:"0"},on:{ok:function(s){t.comfirmGPrice("visible1",t.groupPrice)},cancel:function(s){t.toClose("visible1")}}},[e("ul",{staticClass:"m_box"},[e("li",[t._v("售价: ￥"+t._s(t.shop.sellPrice))]),t._v(" "),e("li",[t._v("利润: ￥"+t._s(t.shop.profit))]),t._v(" "),e("li",[t._v("折扣价"),e("input",{directives:[{name:"model",rawName:"v-model",value:t.groupPrice,expression:"groupPrice"}],attrs:{type:"digit",eventid:"2"},domProps:{value:t.groupPrice},on:{input:function(s){s.target.composing||(t.groupPrice=s.target.value)}}}),t._v("元")])],1)],1),t._v(" "),e("i-modal",{attrs:{visible:t.visible2,eventid:"4",mpcomid:"1"},on:{ok:function(s){t.comfirmDel("visible2")},cancel:function(s){t.toClose("visible2")}}},[e("div",{staticClass:"m_tips"},[t._v("确定要下架该商品？")])]),t._v(" "),e("i-modal",{attrs:{title:"请选择操作",visible:t.visible4,actions:t.actions4,"action-mode":t.vertical,eventid:"5",mpcomid:"2"},on:{iclick:t.handleClick4}}),t._v(" "),e("i-message",{attrs:{id:"message",mpcomid:"3"}})],1)},staticRenderFns:[]};s.a=i},IbyF:function(t,s,e){"use strict";var i=e("C8cP"),a=e("4i1s");var o=function(t){e("hT/v")},n=e("ybqe")(i.a,a.a,o,"data-v-4d4b22eb",null);s.a=n.exports},IyOk:function(t,s,e){"use strict";var i={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"home"},[e("div",{staticClass:"sort-select"},[e("div",{staticClass:"top-nav"},[e("ul",[e("li",{class:[1===t.tag&&"nav-active"],attrs:{eventid:"0"},on:{click:function(s){t.handleTag(1)}}},[t._v("综合")]),t._v(" "),e("li",{class:[2===t.tag&&"nav-active"],attrs:{eventid:"1"},on:{click:function(s){t.handleTag(2)}}},[t._v("销量"),e("div",{staticClass:"sort-box"},[e("i",{staticClass:"sort-top",class:t.asceSale&&"sort-active"}),e("i",{staticClass:"sort-bottom",class:!t.asceSale&&"sort-active"})],1)]),t._v(" "),e("li",{class:[4===t.tag&&"nav-active"],attrs:{eventid:"2"},on:{click:function(s){t.handleTag(4)}}},[t._v("价格"),e("div",{staticClass:"sort-box"},[e("i",{staticClass:"sort-top",class:t.ascePrice&&"sort-active"}),e("i",{staticClass:"sort-bottom",class:!t.ascePrice&&"sort-active"})],1)]),t._v(" "),e("li",{class:[5===t.tag&&"nav-active"],attrs:{eventid:"3"},on:{click:function(s){t.handleTag(5)}}},[t._v("筛选"),e("div",{staticClass:"sort-box"},[e("i",{staticClass:"option-icon"})],1)])],1)],1),t._v(" "),e("div",[e("div",{staticClass:"box"},[t._l(t.shopList,function(s,i){return e("p",{key:i},[e("scard",{key:i,ref:"scard",refInFor:!0,attrs:{shop:s,act:"上架",edit:t.edit,selectedId:t.selIds[i],index:i,"delete-btn":"",eventid:"4-"+i,mpcomid:"0-"+i},on:{switchSel:t.switchSel,deleteItem:t.deleteItem,searchShopGroupItem:t.searchShopGroupItem}})],1)}),t._v(" "),e("div",{staticClass:"white-block"})],2)]),t._v(" "),e("i-drawer",{attrs:{mode:"right",visible:t.showRight1,eventid:"6",mpcomid:"2"},on:{close:t.toggleRight1}},[e("selsearch",{attrs:{eventid:"5",mpcomid:"1"},on:{comSearch:t.comSearch}})],1)],1),t._v(" "),e("i-modal",{attrs:{visible:t.showUp,eventid:"7",mpcomid:"3"},on:{ok:function(s){t.selUp("showUp")},cancel:function(s){t.toClose("showUp")}}},[e("div",{staticClass:"m_tips"},[t._v("确定要批量上架？")])]),t._v(" "),t.edit?e("div",{staticClass:"footer"},[e("p",{staticClass:"style1",attrs:{eventid:"10"},on:{click:function(s){t.toShow("showUp")}}},[t._v("上架")]),t._v(" "),e("p",{staticClass:"style2",attrs:{eventid:"11"},on:{click:t.toGroup}},[t._v("分组")]),t._v(" "),e("p",{staticClass:"style1",attrs:{eventid:"12"},on:{click:t.handleDeleteGoods}},[t._v("删除")]),t._v(" "),e("p",{staticClass:"style3",attrs:{eventid:"13"},on:{click:function(s){t.toggleEdit()}}},[t._v("完成")])],1):e("div",{staticClass:"footer"},[e("p",{staticClass:"style2",attrs:{eventid:"8"},on:{click:function(s){t.toShow("edit")}}},[t._v("批量处理")]),t._v(" "),e("p",{staticClass:"style3",attrs:{eventid:"9"},on:{click:function(s){t.toRoute("home/addShop/editShop")}}},[t._v("添加商品")])],1),t._v(" "),e("i-message",{attrs:{id:"message",mpcomid:"4"}})],1)},staticRenderFns:[]};s.a=i},"J+j5":function(t,s,e){"use strict";var i={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"home"},[e("div",{staticClass:"sort-select"},[e("div",{staticClass:"top-nav"},[e("ul",[e("li",{class:[1===t.tag&&"nav-active"],attrs:{eventid:"0"},on:{click:function(s){t.handleTag(1)}}},[t._v("综合")]),t._v(" "),e("li",{class:[2===t.tag&&"nav-active"],attrs:{eventid:"1"},on:{click:function(s){t.handleTag(2)}}},[t._v("销量"),e("div",{staticClass:"sort-box"},[e("i",{staticClass:"sort-top",class:t.asceSale&&"sort-active"}),e("i",{staticClass:"sort-bottom",class:!t.asceSale&&"sort-active"})],1)]),t._v(" "),e("li",{class:[4===t.tag&&"nav-active"],attrs:{eventid:"2"},on:{click:function(s){t.handleTag(4)}}},[t._v("价格"),e("div",{staticClass:"sort-box"},[e("i",{staticClass:"sort-top",class:t.ascePrice&&"sort-active"}),e("i",{staticClass:"sort-bottom",class:!t.ascePrice&&"sort-active"})],1)]),t._v(" "),e("li",{class:[5===t.tag&&"nav-active"],attrs:{eventid:"3"},on:{click:function(s){t.handleTag(5)}}},[t._v("筛选"),e("div",{staticClass:"sort-box"},[e("i",{staticClass:"option-icon"})],1)])],1)],1),t._v(" "),e("div",[e("div",{staticClass:"box"},[t._l(t.shopList,function(s,i){return e("p",{key:i},[e("scard",{key:i,ref:"scard",refInFor:!0,attrs:{shop:s,edit:t.edit,eventid:"4-"+i,mpcomid:"0-"+i},on:{switchSel:t.switchSel}})],1)}),t._v(" "),e("div",{staticClass:"white-block"})],2)])]),t._v(" "),e("i-drawer",{attrs:{mode:"right",visible:t.showRight1,eventid:"6",mpcomid:"2"},on:{close:t.toggleRight1}},[e("selsearch",{attrs:{eventid:"5",mpcomid:"1"},on:{comSearch:t.comSearch}})],1),t._v(" "),e("i-modal",{attrs:{visible:t.showUp,eventid:"7",mpcomid:"3"},on:{ok:function(s){t.selUp("showUp")},cancel:function(s){t.toClose("showUp")}}},[e("div",{staticClass:"m_tips"},[t._v("确定要批量下架？")])]),t._v(" "),t.edit?t._e():e("div",{staticClass:"footer"},[e("p",{staticClass:"style2",attrs:{eventid:"8"},on:{click:function(s){t.toRoute("home/shopMgr/shopListDiscount")}}},[t._v("创建折扣")])],1)],1)},staticRenderFns:[]};s.a=i},KBf5:function(t,s){},PM7l:function(t,s,e){"use strict";var i=e("lKjR"),a=e("IyOk");var o=function(t){e("7yDB")},n=e("ybqe")(i.a,a.a,o,"data-v-78a4e49c",null);s.a=n.exports},Q6j0:function(t,s){},RGDX:function(t,s,e){"use strict";var i={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"order-shop-card"},[e("div",{staticClass:"item-card"},[e("div",{staticClass:"img",style:{backgroundImage:"url("+t.shop.image+")"}}),t._v(" "),e("div",{staticClass:"desc"},[e("p",{staticClass:"title"},[t._v(t._s(t.shop.name))]),t._v(" "),e("p",{staticClass:"tips"},[e("span",[t._v("档口:"+t._s(t.shop.stallInfo1+"-"+t.shop.stallInfo2+"-"+t.shop.stallInfo3))]),t._v(" "),e("button",{staticClass:"group"},[t._v(t._s(t.shop.ping.num)+"人成团")])],1),t._v(" "),e("p",{staticClass:"sellnum"},[t._v("货期:"+t._s(t.shop.delivery)+"丨销量:"+t._s(t.shop.sellCount))]),t._v(" "),e("p",{staticClass:"collage_price"},[t._v("拼团价: ￥"+t._s(t.shop.ping.price))]),t._v(" "),e("p",{staticClass:"price"},[e("span",{staticClass:"countPrice"},[t._v("售价:￥"+t._s(t.shop.sellPrice))]),t._v(" "),e("span",{staticClass:"sell"},[t._v("   利润:￥"+t._s(t.shop.profit))]),t._v(" "),e("span",{staticClass:"action",attrs:{eventid:"0"},on:{click:t.handleActionClick}},[e("span",{staticClass:"more-icon"},[e("span",{staticClass:"dot"}),t._v(" "),e("span",{staticClass:"dot"}),t._v(" "),e("span",{staticClass:"dot"})])])])],1)]),t._v(" "),e("i-modal",{attrs:{visible:t.visible1,eventid:"2",mpcomid:"0"},on:{ok:function(s){t.comfirmGPrice("visible1",t.pingPrie)},cancel:function(s){t.toClose("visible1")}}},[e("ul",{staticClass:"m_box"},[e("li",[t._v("售价: ￥"+t._s(t.shop.sellPrice))]),t._v(" "),e("li",[t._v("利润: ￥"+t._s(t.shop.profit))]),t._v(" "),e("li",[t._v("折扣价: "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.pingPrie,expression:"pingPrie"}],attrs:{type:"digit",eventid:"1"},domProps:{value:t.pingPrie},on:{input:function(s){s.target.composing||(t.pingPrie=s.target.value)}}}),t._v(" 元")])],1)],1),t._v(" "),e("i-modal",{attrs:{visible:t.visible2,eventid:"3",mpcomid:"1"},on:{ok:function(s){t.comfirmDel("visible2")},cancel:function(s){t.toClose("visible2")}}},[e("div",{staticClass:"m_tips"},[t._v("确定要"+t._s(t.actions4[1].name)+"该商品？")])]),t._v(" "),e("i-modal",{attrs:{title:"请选择操作",visible:t.visible4,actions:t.actions4,"action-mode":t.vertical,eventid:"4",mpcomid:"2"},on:{iclick:t.handleClick4}})],1)},staticRenderFns:[]};s.a=i},SJ7d:function(t,s,e){"use strict";var i=e("Xxa5"),a=e.n(i),o=e("exGp"),n=e.n(o),c=e("Dd8w"),r=e.n(c),l=e("//Fk"),h=e.n(l),d=e("qTHA"),u=e("D5Ci"),p=e("90m7"),v=e("P9O9"),f=e("P6JL");s.a={mixins:[p.a,f.a],components:{groupCard:u.a,loading:v.a},data:function(){return{tabContainerHeight:0,tab:{list:[{title:"未开始",id:0,state:0,lastPage:!1,pageNumber:1,loading:!1,data:[]},{title:"进行中",id:1,state:1,lastPage:!1,pageNumber:1,loading:!1,data:[]},{title:"已结束",id:2,state:2,lastPage:!1,pageNumber:1,loading:!1,data:[]}]},tag:1,shopNum:0,shopList:[],showLoad:!1,canLoad:!0,pageSize:10,type:1,state:1}},methods:{deleteItem:function(t){var s=this;console.log("id=====",t),this.shopList.forEach(function(e,i){e.id===t&&s.shopList.splice(i,1)})},switchSel:function(t,s,e){console.log(t,s,e)},searchShop:function(t){return this.$API.s_getShopGroup(t)},getNextPage:function(t){var s=this;return new h.a(function(e){var i=s.tab.list[s.tag];if(i.lastPage)d.a.showToast({title:"没有更多数据",icon:"none",duration:1500});else if(!i.loading){var a=i.state,o=i.pageNumber;s.$set(s.tab.list[s.tag],"loading",!0),s.searchShop(r()({},t,{state:a,ob:0,pageNumber:o,pageSize:10})).then(function(t){var e=t.data,a=e.list,o=e.lastPage;s.tab.list.splice(s.tag,1,r()({},i,{lastPage:o,pageNumber:i.pageNumber+1,data:s.tab.list[s.tag].data.concat(a)}))}).finally(function(){s.$set(s.tab.list[s.tag],"loading",!1)})}})},handleZanTabChange:function(t){var s=this;return n()(a.a.mark(function e(){var i;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=t.mp.detail,s.tag=i,s.tab.list.splice(i,1,r()({},s.tab.list[i],{data:[],pageNumber:1,lastPage:!1})),s.getNextPage();case 4:case"end":return e.stop()}},e,s)}))()},pageTo:function(t){console.log(111111111),this.$emit("toRoute",t,{isEdit:!1})},lower:function(t){this.getNextPage()}},mounted:function(){var t=this;return n()(a.a.mark(function s(){return a.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:console.log(123312),t.getNextPage();case 2:case"end":return s.stop()}},s,t)}))()},onShow:function(){var t=this;return n()(a.a.mark(function s(){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}},s,t)}))()}}},"Sa++":function(t,s,e){"use strict";var i={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"home",style:{"padding-top":t.topContainerHeight+"px"}},[e("div",{staticClass:"search-box",attrs:{id:"topContainer"}},[e("div",{staticClass:"input"},[e("p",{staticClass:"search-icon"},[e("i",{staticClass:"search"})],1),t._v(" "),e("p",{staticClass:"input-box",attrs:{eventid:"0"},on:{click:function(s){t.toRoute("shopMgr/search")}}},[t._v("请搜索商品")])],1),t._v(" "),e("div",{staticClass:"zan-tab-container"},[e("zan-tab",{attrs:{list:t.navData,"selected-id":t.selectedId,scroll:"",height:45,eventid:"1",mpcomid:"0"},on:{tabchange:t.handleZanTabChange}})],1)]),t._v(" "),e("div",{staticClass:"content"},[1==t.selectedId?e("div",[e("all",{attrs:{mpcomid:"1"}})],1):2==t.selectedId?e("div",[e("selling",{attrs:{mpcomid:"2"}})],1):3==t.selectedId?e("div",[e("stocking",{attrs:{mpcomid:"3"}})],1):4==t.selectedId?e("div",[e("news",{attrs:{mpcomid:"4"}})],1):5==t.selectedId?e("div",[e("hot",{attrs:{mpcomid:"5"}})],1):6==t.selectedId?e("div",[e("discount",{attrs:{mpcomid:"6"}})],1):7==t.selectedId?e("div",[e("collage",{attrs:{eventid:"2",mpcomid:"7"},on:{toRoute:t.toRoute}})],1):8==t.selectedId?e("div",[e("group",{attrs:{mpcomid:"8"}})],1):t._e()]),t._v(" "),e("i-message",{attrs:{id:"message",mpcomid:"9"}})],1)},staticRenderFns:[]};s.a=i},TyjE:function(t,s,e){"use strict";var i=e("+XT3"),a=e("Sa++");var o=function(t){e("zz8Q")},n=e("ybqe")(i.a,a.a,o,"data-v-a289eb82",null);s.a=n.exports},WPXd:function(t,s,e){"use strict";var i=e("Xxa5"),a=e.n(i),o=e("exGp"),n=e.n(o),c=e("Dd8w"),r=e.n(c),l=e("qTHA"),h=e("cyB7"),d=e("90m7"),u=e("NYxO"),p=e("P6JL");s.a={mixins:[d.a,p.a],components:{btn:h.a},data:function(){return{shopList:[],showLoad:!1,canLoad:!0,pageSize:6,shopNum:0,visible2:!1,selectId:""}},computed:r()({},Object(u.b)(["shopMatch"]),{widthArr:function(){var t=[];return this.shopList.forEach(function(s,e){t[e]=Math.round((s.matchGoods.length-1)/2)}),t}}),methods:{pageTo:function(t){this.$store.commit("ADDMATCH",[]),this.$router.push(t)},showModal:function(t,s){this[t]=!0,this.selectId=s},cancelModal:function(t){this[t]=!1},toEdit:function(t,s,e,i){var a=this;this.$store.commit("ADDMATCH",[]),console.log(s),s.forEach(function(t){a.$store.commit("PUSHMATCH",{delivery:t.delivery,goodsId:t.goodsId,image:t.image,name:t.name,profit:t.profit,sellCount:t.sellCount,sellPrice:t.sellPrice})}),console.log(this.shopMatch),this.$router.push({path:t,query:{id:e,title:i}})},downMatchState:function(t){var s=this;this.$API.s_updateMatchState({state:0,matchId:this.selectId}).then(function(e){1===e.code&&(s.shopList.splice(t,1),s.cancelModal("visible2"),l.a.showToast({title:"下架成功",icon:"success"}),setTimeout(function(){l.a.hideToast()},1500))})},searchShop:function(t){return t.pageSize=this.pageSize,this.$API.s_getshopMatch(t)},getNextPage:function(t){return this.shopNum++,t.pageNumber=this.shopNum,this.searchShop(t)},lower:function(t){if(console.log(t),this.canLoad){if(!this.showLoad){this.showLoad=!0,l.a.showLoading({title:"加载中"});var s=this;this.getNextPage({}).then(function(t){s.shopList=s.shopList.concat(t.data.list),t&&(s.showLoad=!1),s.shopList.length===t.data.totalRow&&(s.canLoad=!1),l.a.hideLoading()})}}else l.a.showToast({title:"没有更多数据了",icon:"none",duration:1500})}},created:function(){var t=this;return n()(a.a.mark(function s(){var e;return a.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,t.getNextPage({});case 2:e=s.sent,console.log(e),t.shopList=e.data.list.map(function(t){if(t.matchGoods.length){var s=t.matchGoods.splice(0,1);t.firstGoods=s[0]}return t}),e.data.list.length<t.pageSize&&(t.canLoad=!1);case 6:case"end":return s.stop()}},s,t)}))()},onShow:function(){var t=this;this.$API.s_getshopMatch({pageNumber:1,pageSize:this.pageSize}).then(function(s){t.shopList=s.data.list})}}},c1N6:function(t,s,e){"use strict";var i={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"home"},[e("div",{staticClass:"scroll-y"},[t._l(t.shopList,function(s,i){return e("div",{key:i},[e("scroll-view",{staticStyle:{width:"100%"},attrs:{"scroll-x":"true"}},[e("div",{staticClass:"scroll-x"},[e("div",{staticClass:"left-box"},[e("div",{staticClass:"title"},[e("i",{staticClass:"icon"}),t._v(" "),e("span",[t._v(t._s(s.title||"未设置标题"))])],1),t._v(" "),e("div",{staticClass:"main-img"},[e("div",{staticClass:"border"},[e("i",{staticClass:"shop-img",style:{backgroundImage:"url("+s.firstGoods.image+");"}})],1),t._v(" "),e("span",{staticClass:"title"},[t._v(t._s(s.firstGoods.name))]),t._v(" "),e("span",{staticClass:"desc"},[t._v(" 货期:"+t._s(s.firstGoods.delivery)+"丨销量:"+t._s(s.firstGoods.sellCount))]),t._v(" "),e("span",{staticClass:"price"},[e("strong",[t._v("售价:￥"+t._s(s.firstGoods.sellPrice))]),t._v("利润:￥"+t._s(s.firstGoods.profit))],1)]),t._v(" "),e("div",{staticClass:"footer"},[e("button",{staticClass:"edit",attrs:{eventid:"0-"+i},on:{click:function(e){t.toEdit("/pages/home/shopMgr/groupSetting",s.matchGoods,s.id,s.title)}}},[t._v("编辑")]),t._v(" "),e("button",{staticClass:"down",attrs:{eventid:"1-"+i},on:{click:function(e){t.showModal("visible2",s.id)}}},[t._v("下架")])],1)]),t._v(" "),e("div",{staticClass:"right-box"},[e("div",t._l(s.matchGoods,function(i,a){return a<s.matchGoods.length/2?e("div",{key:a,staticClass:"item-img"},[e("div",{staticClass:"border"},[e("i",{staticClass:"shop-img",style:{backgroundImage:"url("+i.image+");"}})],1),t._v(" "),e("span",{staticClass:"title"},[t._v(t._s(i.name))]),t._v(" "),e("span",{staticClass:"desc"},[t._v(" 货期:"+t._s(i.delivery)+"丨销量:"+t._s(i.sellCount))]),t._v(" "),e("span",{staticClass:"price"},[e("strong",[t._v("售价:￥"+t._s(i.sellPrice))]),t._v("利润:￥"+t._s(i.profit))],1)]):t._e()})),t._v(" "),e("div",t._l(s.matchGoods,function(i,a){return a>=s.matchGoods.length/2?e("div",{key:a,staticClass:"item-img"},[e("div",{staticClass:"border"},[e("i",{staticClass:"shop-img",style:{backgroundImage:"url("+i.image+");"}})],1),t._v(" "),e("span",{staticClass:"title"},[t._v(t._s(i.name))]),t._v(" "),e("span",{staticClass:"desc"},[t._v(" 货期:"+t._s(i.delivery)+"丨销量:"+t._s(i.sellCount))]),t._v(" "),e("span",{staticClass:"price"},[e("strong",[t._v("售价:￥"+t._s(i.sellPrice))]),t._v("利润:￥"+t._s(i.profit))],1)]):t._e()}))])])])],1)}),t._v(" "),e("i-modal",{attrs:{visible:t.visible2,eventid:"2",mpcomid:"0"},on:{ok:function(s){t.downMatchState(t.index)},cancel:function(s){t.cancelModal("visible2")}}},[e("div",[t._v("确定要下架此搭配吗?")])])],2),t._v(" "),e("div",{staticClass:"white-space"}),t._v(" "),e("div",{staticClass:"create"},[e("button",{attrs:{eventid:"3"},on:{click:function(s){t.pageTo("/pages/home/shopMgr/setNewMatch")}}},[t._v("创建搭配")])],1)])},staticRenderFns:[]};s.a=i},"d8s+":function(t,s,e){"use strict";var i=e("woOf"),a=e.n(i),o=e("Xxa5"),n=e.n(o),c=e("exGp"),r=e.n(c),l=e("qTHA"),h=e("imcP"),d=e("90m7"),u=e("yHWc"),p=e("P6JL");s.a={mixins:[d.a,p.a],components:{scard:h.a,selsearch:u.a},computed:{},data:function(){return{groupTag:1,showUp:!1,asceSale:!0,ascePrice:!0,tag:1,showRight1:!1,edit:!1,allCheck:!1,shopNum:0,shopList:[],showLoad:!1,canLoad:!0,pageSize:10,type:1,selIds:[],state:1,goodsIds:[]}},methods:{searchShopGroupItem:function(){var t=this,s={pageNumber:1};s.pageSize=this.pageSize,s.ob=1,s.labelId=this.groupTag,s.state=this.state,console.log(s),this.shopList=[],this.$API.searchShopGroup(s).then(function(s){t.shopList=s.data.list})},deleteItem:function(t){var s=this;console.log("id=====",t),this.shopList.forEach(function(e,i){e.id===t&&s.shopList.splice(i,1)})},toShow:function(t){var s=this;if("edit"===t)return this[t]=!0,void this.selIds.forEach(function(t,e){s.selIds[e]="-1"});this.selIds.every(function(t){return"-1"==t})?l.a.showToast({title:"请先选择商品",icon:"none"}):this[t]=!0},toggleEdit:function(){this.edit=!this.edit},handleTag:function(t){var s=this;return r()(n.a.mark(function e(){var i,a;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s.tag=t,i=1,s.shopNum=0,s.canLoad=!0,s.showLoad=!1,2===t&&(s.asceSale=!s.asceSale,i=s.asceSale?2:3),4===t&&(s.ascePrice=!s.ascePrice,i=s.ascePrice?4:5),5!==t){e.next=10;break}return s.toggleRight1(),e.abrupt("return");case 10:return s.type=i,e.next=13,s.getNextPage({ob:i,state:s.state,labelId:s.groupTag});case 13:a=e.sent,s.shopList=a.data.list,s.shopList.forEach(function(t,e){s.selIds[e]="-1"}),a.data.list.length<s.pageSize&&(s.canLoad=!1);case 17:case"end":return e.stop()}},e,s)}))()},toggleRight1:function(){this.showRight1=!this.showRight1},searchShop:function(t){return t.pageSize=this.pageSize,this.$API.searchShopGroup(t)},getNextPage:function(t){return this.shopNum++,5==this.tag&&(t=a()(t,this.selParam)),t.pageNumber=this.shopNum,this.searchShop(t)},lower:function(t){var s=this;if(console.log(t),this.canLoad){if(!this.showLoad){this.showLoad=!0,l.a.showLoading({title:"加载中"});var e=this;this.getNextPage({ob:this.type,state:this.state}).then(function(t){e.shopList=e.shopList.concat(t.data.list),e.shopList.forEach(function(t,e){s.selIds[e]="-1"}),t&&(e.showLoad=!1),e.shopList.length===t.data.totalRow&&(e.canLoad=!1),l.a.hideLoading()})}}else l.a.showToast({title:"没有更多数据了",icon:"none",duration:1500})},comSearch:function(t){var s=this;return r()(n.a.mark(function e(){var i;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s.toggleRight1(),s.selParam=t,e.next=4,s.getNextPage({ob:1,state:s.state,labelId:s.groupTag});case 4:i=e.sent,s.shopList=i.data.list,s.shopList.forEach(function(t,e){s.selIds[e]="-1"}),i.data.list.length<s.pageSize&&(s.canLoad=!1);case 8:case"end":return e.stop()}},e,s)}))()},switchSel:function(t,s,e){console.log(t,s),"-1"===this.selIds[e]?this.$set(this.selIds,e,t):this.$set(this.selIds,e,"-1"),console.log(this.selIds)},selUp:function(t){var s=this;return r()(n.a.mark(function e(){return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s[t]=!s[t],!s.selIds.every(function(t){return"-1"==t})){e.next=4;break}return l.a.showToast({title:"请先选择商品",icon:"none"}),e.abrupt("return");case 4:return s.goodsIds=s.selIds.filter(function(t){return"-1"!==t}),e.next=7,s.$API.switchShop({goodsIds:s.selIds.join(","),state:0==s.state?1:0});case 7:s.shopList.forEach(function(t,e){s.selIds.forEach(function(i){t.id===i&&(s.shopList.splice(e,1),s.selIds.splice(e,1))})}),s.shopList.forEach(function(t,e){s.selIds[e]="-1"}),s.$success("下架成功！");case 11:case"end":return e.stop()}},e,s)}))()},toGroup:function(){if(this.selIds.every(function(t){return"-1"===t}))return this.handleError("请至少选择一件商品！");this.toRoute("home/shopMgr/classifyAll",{type:0,ids:this.selIds.join(",")})}},mounted:function(){var t=this;return r()(n.a.mark(function s(){var e;return n.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return console.log(t.shopList),t.shopNum=0,s.next=4,t.getNextPage({ob:1,state:t.state,labelId:t.groupTag});case 4:e=s.sent,console.log(e),t.shopList=e.data.list,t.shopList.forEach(function(s,e){t.selIds[e]="-1"}),e.data.list.length<t.pageSize&&(t.canLoad=!1),console.log(t.shopList);case 10:case"end":return s.stop()}},s,t)}))()}}},eRcT:function(t,s,e){"use strict";var i=e("SJ7d"),a=e("s93E");var o=function(t){e("49G/")},n=e("ybqe")(i.a,a.a,o,"data-v-5c5849dd",null);s.a=n.exports},eqe3:function(t,s){},g866:function(t,s,e){"use strict";var i=e("Xxa5"),a=e.n(i),o=e("exGp"),n=e.n(o),c=e("90m7"),r=e("Zm3I");s.a={mixins:[c.a],props:{edit:{type:Boolean,default:!1},shop:{type:Object}},data:function(){return{check:!1,visible1:!1,visible2:!1,visible4:!1,groupPrice:"",actions4:[{name:"编辑"},{name:"下架"},{name:"分组"},{name:"取消"}]}},computed:{},updated:function(){console.log(this.groupPrice)},methods:{handleActionClick:function(){var t=this;wx.showActionSheet({itemList:["编辑","下架","分组"],success:function(s){switch(s.tapIndex){case 0:t.visible1=!0;break;case 1:t.visible2=!0;break;case 2:t.$store.commit("ADDSHOPGROUP",{groupIds:t.shop.groupIds,goodsIds:t.shop.id,type:"update"}),t.toRoute("home/shopMgr/classify")}}})},comfirmDel:function(t){var s=this;return n()(a.a.mark(function t(){var e;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s.visible2=!1,e=0,t.next=4,s.$API.switchShop({goodsIds:s.shop.id,state:e});case 4:s.show=!1,s.$success("下架成功"),r.a.$emit("on-discount-list-delete",s.shop.id);case 7:case"end":return t.stop()}},t,s)}))()},select:function(){""!=this.groupPrice?(this.check=!this.check,this.$emit("switchSel",this.shop.id,this.groupPrice,this.check)):this.$Message({content:"请先拼团价格",type:"warning"})},comfirmGPrice:function(t,s){var e=this;this.toClose(t),s?(console.log("disPrice==>"+s),this.$API.updateDisGoods({goodsId:this.shop.id,disPrice:s}).then(function(t){1===t.code&&(e.shop.disPrice=s,e.$Toast({content:"修改成功",type:"success"}))})):this.$Toast({content:"折扣价格不能为空",type:"warning"})},handleClick4:function(t){t.mp.detail.index;this.visible4=!1}}}},glsu:function(t,s,e){"use strict";var i={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"order-shop-card"},[e("div",{staticClass:"item-card"},[t.edit?e("div",{staticClass:"select-box",class:[t.selectedId==t.shop.id?"active":""],attrs:{eventid:"0"},on:{click:function(s){t.select(t.shop.id,t.index)}}}):t._e(),t._v(" "),e("i",{staticClass:"img",style:{backgroundImage:"url("+t.shop.image+")"}}),t._v(" "),e("div",{staticClass:"desc"},[e("p",{staticClass:"title"},[t._v(t._s(t.shop.name))]),t._v(" "),e("p",{staticClass:"tips"},[e("span",[t._v("档口:"+t._s(t.shop.stallInfo1+"-"+t.shop.stallInfo2+"-"+t.shop.stallInfo3))])]),t._v(" "),e("p",{staticClass:"sellnum"},[t._v("货期:"+t._s(t.shop.delivery)+"丨销量:"+t._s(t.shop.sellCount))]),t._v(" "),e("div",{staticClass:"price"},[e("span",{staticClass:"countPrice"},[t._v("售价:￥"+t._s(t.shop.sellPrice))]),t._v(" "),e("span",{staticClass:"sell"},[t._v("   利润:￥"+t._s(t.shop.profit))]),t._v(" "),t.edit?t._e():e("span",{staticClass:"action",attrs:{eventid:"1"},on:{click:t.handleActionClick}},[t._m(0)])])],1)],1),t._v(" "),e("i-modal",{attrs:{visible:t.visible2,eventid:"2",mpcomid:"0"},on:{ok:function(s){t.comfirmDel("visible2")},cancel:function(s){t.toClose("visible2")}}},[e("div",{staticClass:"m_tips"},[t._v("确定要"+t._s(1===t.shop.state?"下架":"上架")+"该商品？")])]),t._v(" "),e("i-modal",{attrs:{visible:t.visible3,eventid:"4",mpcomid:"2"},on:{ok:function(s){t.confirmSet("visible3")},cancel:function(s){t.toClose("visible3")}}},[e("ul",{staticClass:"m_tips"},t._l(t.groupList,function(s,i){return e("li",{key:i,attrs:{eventid:"3-"+i},on:{click:function(e){t.selectIcon(s.id,i)}}},[e("selectIcon",{attrs:{isSelected:t.isSelectList.some(function(t){return t==s.id}),mpcomid:"1-"+i}}),t._v(t._s(s.name))],1)}))],1),t._v(" "),e("i-modal",{attrs:{title:"请选择操作",visible:t.visible4,actions:t.actions4,"action-mode":t.vertical,eventid:"5",mpcomid:"3"},on:{iclick:t.handleClick4}})],1)},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("span",{staticClass:"more-icon"},[s("span",{staticClass:"dot"}),this._v(" "),s("span",{staticClass:"dot"}),this._v(" "),s("span",{staticClass:"dot"})])}]};s.a=i},"hT/v":function(t,s){},i4Ud:function(t,s,e){"use strict";var i=e("/U/D"),a=e("vuao");var o=function(t){e("eqe3")},n=e("ybqe")(i.a,a.a,o,"data-v-75b3f0d2",null);s.a=n.exports},imcP:function(t,s,e){"use strict";var i=e("t/lo"),a=e("glsu");var o=function(t){e("EmET")},n=e("ybqe")(i.a,a.a,o,"data-v-19e74694",null);s.a=n.exports},lKjR:function(t,s,e){"use strict";var i=e("woOf"),a=e.n(i),o=e("Xxa5"),n=e.n(o),c=e("exGp"),r=e.n(c),l=e("qTHA"),h=e("imcP"),d=e("90m7"),u=e("yHWc"),p=e("P6JL");s.a={mixins:[d.a,p.a],components:{scard:h.a,selsearch:u.a},computed:{},data:function(){return{showUp:!1,asceSale:!0,ascePrice:!0,tag:1,showRight1:!1,edit:!1,allCheck:!1,shopNum:0,shopList:[],showLoad:!1,canLoad:!0,pageSize:10,type:1,selIds:[],state:0,goodsIds:[]}},methods:{searchShopGroupItem:function(){var t=this,s={pageNumber:1};s.pageSize=this.pageSize,s.ob=1,s.state=this.state,console.log(s),this.shopList=[],this.$API.searchShopGroup(s).then(function(s){t.shopList=s.data.list})},deleteItem:function(t){var s=this;console.log("id=====",t),this.shopList.forEach(function(e,i){e.id===t&&(s.shopList.splice(i,1),s.selIds.splice(i,1))})},toShow:function(t){var s=this;if("edit"===t)return this[t]=!0,this.selIds.forEach(function(t,e){s.selIds[e]="-1"}),void console.log(this.selIds);this.selIds.every(function(t){return"-1"==t})?l.a.showToast({title:"请先选择商品",icon:"none"}):this[t]=!0},handleDeleteGoods:function(){this.selIds.every(function(t){return"-1"==t})?l.a.showToast({title:"请先选择商品",icon:"none"}):(console.log(this.selIds),this.$API.deleteGoods({goodsId:this.selIds.filter(function(t){return"-1"!==t}).filter(function(t){return!!t}).join(",")}))},toggleEdit:function(){this.edit=!this.edit},handleTag:function(t){var s=this;return r()(n.a.mark(function e(){var i,a;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s.tag=t,i=1,s.shopNum=0,s.canLoad=!0,s.showLoad=!1,2===t&&(s.asceSale=!s.asceSale,i=s.asceSale?2:3),4===t&&(s.ascePrice=!s.ascePrice,i=s.ascePrice?4:5),5!==t){e.next=10;break}return s.toggleRight1(),e.abrupt("return");case 10:return s.type=i,e.next=13,s.getNextPage({ob:i,state:s.state});case 13:a=e.sent,s.shopList=a.data.list,s.shopList.forEach(function(t,e){s.selIds[e]="-1"}),a.data.list.length<s.pageSize&&(s.canLoad=!1);case 17:case"end":return e.stop()}},e,s)}))()},toggleRight1:function(){this.showRight1=!this.showRight1},searchShop:function(t){return t.pageSize=this.pageSize,this.$API.searchShopGroup(t)},getNextPage:function(t){return this.shopNum++,5==this.tag&&(t=a()(t,this.selParam)),t.pageNumber=this.shopNum,this.searchShop(t)},lower:function(t){var s=this;if(console.log(t),this.canLoad){if(!this.showLoad){this.showLoad=!0,l.a.showLoading({title:"加载中"});var e=this;this.getNextPage({ob:this.type,state:this.state}).then(function(t){e.shopList=e.shopList.concat(t.data.list),t.data.list.forEach(function(t,e){s.selIds.push("-1")}),console.log("下拉加载后的新数据",s.selIds),t&&(e.showLoad=!1),e.shopList.length===t.data.totalRow&&(e.canLoad=!1),l.a.hideLoading()})}}else l.a.showToast({title:"没有更多数据了",icon:"none",duration:1500})},comSearch:function(t){var s=this;return r()(n.a.mark(function e(){var i;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s.toggleRight1(),s.selParam=t,e.next=4,s.getNextPage({ob:1,state:s.state});case 4:i=e.sent,s.shopList=i.data.list,s.shopList.forEach(function(t,e){s.selIds[e]="-1"}),i.data.list.length<s.pageSize&&(s.canLoad=!1);case 8:case"end":return e.stop()}},e,s)}))()},switchSel:function(t,s,e){console.log(t,s),"-1"===this.selIds[e]?this.$set(this.selIds,e,t):this.$set(this.selIds,e,"-1"),console.log(this.selIds)},selUp:function(t){var s=this;return r()(n.a.mark(function e(){return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s[t]=!s[t],!s.selIds.every(function(t){return"-1"==t})){e.next=4;break}return l.a.showToast({title:"请先选择商品",icon:"none"}),e.abrupt("return");case 4:return s.goodsIds=s.selIds.filter(function(t){return"-1"!==t}),e.next=7,s.$API.switchShop({goodsIds:s.goodsIds.toString(),state:0==s.state?1:0});case 7:s.shopList.forEach(function(t,e){s.selIds.forEach(function(i){t.id===i&&(s.shopList.splice(e,1),s.selIds.splice(e,1))})}),s.shopList.forEach(function(t,e){s.selIds[e]="-1"}),s.$success("上架成功！");case 11:case"end":return e.stop()}},e,s)}))()},toGroup:function(){if(this.selIds.every(function(t){return"-1"===t}))return this.handleError("请至少选择一件商品！");this.toRoute("home/shopMgr/classifyAll",{type:0,ids:this.selIds.join(",")})}},mounted:function(){var t=this;return r()(n.a.mark(function s(){var e;return n.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return console.log(t.shopList),t.shopNum=0,s.next=4,t.getNextPage({ob:1,state:t.state});case 4:e=s.sent,console.log(e),t.shopList=e.data.list,t.shopList.forEach(function(s,e){t.selIds[e]="-1"}),e.data.list.length<t.pageSize&&(t.canLoad=!1),console.log(t.shopList);case 10:case"end":return s.stop()}},s,t)}))()}}},o1X9:function(t,s,e){"use strict";var i=e("g866"),a=e("HUAE");var o=function(t){e("Q6j0")},n=e("ybqe")(i.a,a.a,o,"data-v-fbd93d56",null);s.a=n.exports},"oH/4":function(t,s,e){"use strict";var i=e("wtJG"),a=e("J+j5");var o=function(t){e("vzjM")},n=e("ybqe")(i.a,a.a,o,"data-v-52c4c132",null);s.a=n.exports},s0gn:function(t,s,e){"use strict";var i=e("WPXd"),a=e("c1N6");var o=function(t){e("4ilh")},n=e("ybqe")(i.a,a.a,o,"data-v-2755fc49",null);s.a=n.exports},s93E:function(t,s,e){"use strict";var i={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"home"},[e("div",{staticClass:"sort-select"},[e("div",{staticClass:"zan-tab-container",attrs:{id:"tabContainer"}},[e("zan-tab",{attrs:{list:t.tab.list,"selected-id":t.tag,eventid:"0",mpcomid:"0"},on:{tabchange:t.handleZanTabChange}})],1),t._v(" "),e("div",t._l(t.tab.list,function(s,i){return e("div",{directives:[{name:"show",rawName:"v-show",value:i===t.tag,expression:"tabIndex === tag"}],key:i,staticClass:"box"},[t._l(s.data,function(s,a){return e("p",{key:s.id},[e("groupCard",{key:a,ref:"scard",refInFor:!0,attrs:{shop:s,eventid:"1-"+i+"-"+a,mpcomid:"1-"+i+"-"+a},on:{switchSel:t.switchSel,deleteItem:t.deleteItem,openEdit:t.openEdit}})],1)}),t._v(" "),e("div",{staticClass:"white-block"})],2)}))]),t._v(" "),e("div",{staticClass:"footer"},[e("p",{staticClass:"style2",attrs:{eventid:"2"},on:{click:function(s){t.pageTo("collage/collageMsg")}}},[t._v("创建拼团")])],1)])},staticRenderFns:[]};s.a=i},"t/lo":function(t,s,e){"use strict";var i=e("Xxa5"),a=e.n(i),o=e("exGp"),n=e.n(o),c=e("SWGo"),r=e("90m7"),l=this;s.a={mixins:[r.a],components:{selectIcon:c.a},props:{deleteBtn:{type:Boolean,default:!1},edit:{type:Boolean,default:!1},shop:{type:Object,default:{}},act:{type:String,default:"下架"},selectedId:{type:String,default:""},index:{type:Number,default:0}},$watch:{edit:function(t,s){l.check=!1,console.log(l.check)}},data:function(){return{check:!1,visible4:!1,visible2:!1,visible3:!1,groupList:[],isSelectList:[]}},computed:{},methods:{handleActionClick:function(){var t=this,s=["编辑",0===this.shop.state?"上架":"下架","分组"];this.deleteBtn&&s.push("删除"),wx.showActionSheet({itemList:s,success:function(s){switch(s.tapIndex){case 0:t.toRoute("home/addShop/editShop",{shopId:t.shop.id});break;case 1:t.visible2=!0;break;case 2:t.$API.searchType({types:1}).then(function(s){t.groupList=s.data,t.isSelectList=t.shop.groupIds.split(","),t.toOpen("visible3")});break;case 3:var e=t.shop.id;t.$API.deleteGoods({goodsIds:e})}}})},confirmSet:function(t){var s=this;this.isSelectList.every(function(t){return"-1"===t})?wx.showToast({title:"请先选择商品",icon:"none"}):(this.isSelectList=this.isSelectList.filter(function(t){return"-1"!==t}),this.$API.editGroups({goodsIds:this.shop.id,groupIds:this.isSelectList.filter(function(t){return!!t}).toString()}).then(function(e){wx.showToast({title:"修改分组成功",icon:"success"}),s.$emit("searchShopGroupItem"),s.close(t)}))},selectIcon:function(t,s){this.isSelectList.filter(function(t){return!!t}).length<=1&&this.isSelectList[s]?wx.showToast({title:"至少需要一个分组",icon:"none",duration:1500}):this.isSelectList[s]?this.$set(this.isSelectList,s,""):this.$set(this.isSelectList,s,t)},select:function(t,s){console.log(t,s),this.selectedId?this.$emit("switchSel",t,!1,s):this.$emit("switchSel",t,!0,s)},comfirmDel:function(t){var s=this;return n()(a.a.mark(function e(){var i;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s[t]=!1,i=0,"下架"!=s.act&&(i=1),e.next=5,s.$API.switchShop({goodsIds:s.shop.id,state:i});case 5:s.show=!1,s.$success(s.act+"成功！"),setTimeout(function(){s.$emit("deleteItem",s.shop.id)},1e3);case 8:case"end":return e.stop()}},e,s)}))()}},mounted:function(){}}},vTOk:function(t,s){},vuao:function(t,s,e){"use strict";var i={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"home"},[e("div",{staticClass:"sort-select"},[e("div",{staticClass:"top-nav"},[e("ul",[e("li",{class:[1===t.tag&&"nav-active"],attrs:{eventid:"0"},on:{click:function(s){t.handleTag(1)}}},[t._v("综合")]),t._v(" "),e("li",{class:[2===t.tag&&"nav-active"],attrs:{eventid:"1"},on:{click:function(s){t.handleTag(2)}}},[t._v("销量"),e("div",{staticClass:"sort-box"},[e("i",{staticClass:"sort-top",class:t.asceSale&&"sort-active"}),e("i",{staticClass:"sort-bottom",class:!t.asceSale&&"sort-active"})],1)]),t._v(" "),e("li",{class:[4===t.tag&&"nav-active"],attrs:{eventid:"2"},on:{click:function(s){t.handleTag(4)}}},[t._v("价格"),e("div",{staticClass:"sort-box"},[e("i",{staticClass:"sort-top",class:t.ascePrice&&"sort-active"}),e("i",{staticClass:"sort-bottom",class:!t.ascePrice&&"sort-active"})],1)]),t._v(" "),e("li",{class:[5===t.tag&&"nav-active"],attrs:{eventid:"3"},on:{click:function(s){t.handleTag(5)}}},[t._v("筛选"),e("div",{staticClass:"sort-box"},[e("i",{staticClass:"option-icon"})],1)])],1)],1),t._v(" "),e("div",[e("div",{staticClass:"box"},[t._l(t.shopList,function(s,i){return e("p",{key:i},[e("scard",{key:i,ref:"scard",refInFor:!0,attrs:{shop:s,edit:t.edit,selectedId:t.selIds[i],index:i,eventid:"4-"+i,mpcomid:"0-"+i},on:{switchSel:t.switchSel,deleteItem:t.deleteItem,searchShopGroupItem:t.searchShopGroupItem}})],1)}),t._v(" "),e("div",{staticClass:"white-block"})],2)])]),t._v(" "),e("i-drawer",{attrs:{mode:"right",visible:t.showRight1,eventid:"6",mpcomid:"2"},on:{close:t.toggleRight1}},[e("selsearch",{attrs:{eventid:"5",mpcomid:"1"},on:{comSearch:t.comSearch}})],1),t._v(" "),e("i-modal",{attrs:{visible:t.showUp,eventid:"7",mpcomid:"3"},on:{ok:function(s){t.selUp("showUp")},cancel:function(s){t.toClose("showUp")}}},[e("div",{staticClass:"m_tips"},[t._v("确定要批量下架？")])]),t._v(" "),t.edit?e("div",{staticClass:"footer"},[e("p",{staticClass:"style1",attrs:{eventid:"10"},on:{click:function(s){t.toShow("showUp")}}},[t._v("下架")]),t._v(" "),e("p",{staticClass:"style2",attrs:{eventid:"11"},on:{click:t.toGroup}},[t._v("分组")]),t._v(" "),e("p",{staticClass:"style3",attrs:{eventid:"12"},on:{click:function(s){t.toggleEdit()}}},[t._v("完成")])],1):e("div",{staticClass:"footer"},[e("p",{staticClass:"style2",attrs:{eventid:"8"},on:{click:function(s){t.toShow("edit")}}},[t._v("批量处理")]),t._v(" "),e("p",{staticClass:"style3",attrs:{eventid:"9"},on:{click:function(s){t.toRoute("home/addShop/editShop")}}},[t._v("添加商品")])],1)],1)},staticRenderFns:[]};s.a=i},vzjM:function(t,s){},wtJG:function(t,s,e){"use strict";var i=e("woOf"),a=e.n(i),o=e("Xxa5"),n=e.n(o),c=e("exGp"),r=e.n(c),l=e("qTHA"),h=e("o1X9"),d=e("90m7"),u=e("yHWc"),p=e("P6JL"),v=e("Zm3I");s.a={mixins:[d.a,p.a],components:{scard:h.a,selsearch:u.a},computed:{},data:function(){return{groupTag:3,showUp:!1,asceSale:!0,ascePrice:!0,tag:1,showRight1:!1,edit:!1,allCheck:!1,shopNum:0,shopList:[],showLoad:!1,canLoad:!0,pageSize:10,type:1,selIds:[],state:1}},methods:{handleTag:function(t){var s=this;return r()(n.a.mark(function e(){var i,a;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s.tag=t,i=1,s.shopNum=0,s.canLoad=!0,s.showLoad=!1,2===t&&(s.asceSale=!s.asceSale,i=s.asceSale?2:3),4===t&&(s.ascePrice=!s.ascePrice,i=s.ascePrice?4:5),5!==t){e.next=10;break}return s.toggleRight1(),e.abrupt("return");case 10:return s.type=i,e.next=13,s.getNextPage({ob:i,state:s.state});case 13:a=e.sent,s.shopList=a.data.list,a.data.list.length<s.pageSize&&(s.canLoad=!1);case 16:case"end":return e.stop()}},e,s)}))()},toggleRight1:function(){this.showRight1=!this.showRight1},searchShop:function(t){return t.pageSize=this.pageSize,t.isDis=1,this.$API.searchShopGroup(t)},getNextPage:function(t){return this.shopNum++,5==this.tag&&(t=a()(t,this.selParam)),t.pageNumber=this.shopNum,this.searchShop(t)},lower:function(t){if(this.canLoad){if(!this.showLoad){this.showLoad=!0,l.a.showLoading({title:"加载中"});var s=this;this.getNextPage({ob:this.type,state:this.state}).then(function(t){s.shopList=s.shopList.concat(t.data.list),t&&(s.showLoad=!1),s.shopList.length===t.data.totalRow&&(s.canLoad=!1),l.a.hideLoading()})}}else l.a.showToast({title:"没有更多数据了",icon:"none",duration:1500})},comSearch:function(t){var s=this;return r()(n.a.mark(function e(){var i;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s.toggleRight1(),s.selParam=t,e.next=4,s.getNextPage({ob:1,state:s.state});case 4:i=e.sent,s.shopList=i.data.list,i.data.list.length<s.pageSize&&(s.canLoad=!1);case 7:case"end":return e.stop()}},e,s)}))()},switchSel:function(t,s){if(s)this.selIds.push(t);else{var e=this.selIds.indexOf(t);this.selIds.splice(e,1)}console.log(this.selIds)},selUp:function(t){var s=this;return r()(n.a.mark(function e(){var i,a,o,c,r;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s[t]=!s[t],0!=s.selIds.length){e.next=3;break}return e.abrupt("return",s.handleError("请至少选择一件商品！"));case 3:return e.next=5,s.$API.switchShop({goodsIds:s.selIds.join(","),state:0==s.state?1:0});case 5:for(s.edit=!1,i=s.shopList,a=0;o=s.selIds[a++];)for(c=0;r=i[c++];)r.id==o&&(r.del=!0);s.selIds=[],s.shopList=i,s.$success("下架成功！");case 11:case"end":return e.stop()}},e,s)}))()},toGroup:function(){if(0==this.selIds.length)return this.handleError("请至少选择一件商品！");this.edit=!1,this.toRoute("home/shopMgr/classifyAll",{type:0,ids:this.selIds.join(",")})}},mounted:function(){var t=this;v.a.$on("on-discount-list-delete",function(s){t.shopList=t.shopList.filter(function(t){return t.id!==s})}),this.shopNum=0,this.getNextPage({ob:1,state:this.state,isDis:1}).then(function(s){t.shopList=s.data.list,t.shopList.length<t.pageSize&&(t.canLoad=!1)})},destroyed:function(){v.a.$off("on-discount-list-delete")},onShow:function(){var t=this;console.log("onShow直行了"),this.shopNum=0,this.getNextPage({ob:1,state:this.state,isDis:1}).then(function(s){t.shopList=s.data.list,t.shopList.length<t.pageSize&&(t.canLoad=!1)})}}},x5d0:function(t,s,e){"use strict";var i=e("z3Im"),a=e("zG7d");var o=function(t){e("EmSM")},n=e("ybqe")(i.a,a.a,o,"data-v-59f5ffcc",null);s.a=n.exports},z3Im:function(t,s,e){"use strict";var i=e("woOf"),a=e.n(i),o=e("Xxa5"),n=e.n(o),c=e("exGp"),r=e.n(c),l=e("qTHA"),h=e("imcP"),d=e("P9O9"),u=e("90m7"),p=e("yHWc"),v=e("P6JL");s.a={mixins:[u.a,v.a],components:{scard:h.a,loading:d.a,selsearch:p.a},computed:{},data:function(){return{showUp:!1,asceSale:!0,ascePrice:!0,tag:1,showRight1:!1,edit:!1,shopNum:0,shopList:[],showLoad:!1,canLoad:!0,pageSize:10,type:1,selIds:[],state:1}},methods:{searchShopGroupItem:function(){var t=this,s={pageNumber:1};s.pageSize=this.pageSize,s.ob=1,s.state=this.state,console.log(s),this.shopList=[],this.$API.searchShopGroup(s).then(function(s){t.shopList=s.data.list})},deleteItem:function(t){var s=this;console.log("id=====",t),this.shopList.forEach(function(e,i){e.id===t&&(s.shopList.splice(i,1),s.selIds.splice(i,1))})},toShow:function(t){var s=this;if("edit"===t)return this[t]=!0,void this.selIds.forEach(function(t,e){s.selIds[e]="-1"});this.selIds.every(function(t){return"-1"==t})?l.a.showToast({title:"请先选择商品",icon:"none"}):this[t]=!0},toggleEdit:function(){this.edit=!this.edit},handleTag:function(t){var s=this;return r()(n.a.mark(function e(){var i,a;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s.tag=t,i=1,s.shopNum=0,s.canLoad=!0,s.showLoad=!1,2===t&&(s.asceSale=!s.asceSale,i=s.asceSale?2:3),4===t&&(s.ascePrice=!s.ascePrice,i=s.ascePrice?4:5),5!==t){e.next=10;break}return s.toggleRight1(),e.abrupt("return");case 10:return s.type=i,e.next=13,s.getNextPage({ob:i,state:s.state});case 13:a=e.sent,s.shopList=a.data.list,s.shopList.forEach(function(t,e){s.selIds[e]="-1"}),a.data.list.length<s.pageSize&&(s.canLoad=!1);case 17:case"end":return e.stop()}},e,s)}))()},toggleRight1:function(){this.showRight1=!this.showRight1},searchShop:function(t){return t.pageSize=this.pageSize,this.$API.searchShopGroup(t)},getNextPage:function(t){return this.shopNum++,5==this.tag&&(t=a()(t,this.selParam)),t.pageNumber=this.shopNum,this.searchShop(t)},lower:function(t){var s=this;if(this.canLoad){if(!this.showLoad){this.showLoad=!0,l.a.showLoading({title:"加载中"});var e=this;this.getNextPage({ob:this.type,state:this.state}).then(function(t){e.shopList=e.shopList.concat(t.data.list),t.data.list.forEach(function(t,e){s.selIds.push("-1")}),t&&(e.showLoad=!1),e.shopList.length===t.data.totalRow&&(e.canLoad=!1),l.a.hideLoading()})}}else l.a.showToast({title:"没有更多数据了",icon:"none",duration:1500})},comSearch:function(t){var s=this;return r()(n.a.mark(function e(){var i;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s.toggleRight1(),s.selParam=t,e.next=4,s.getNextPage({ob:1,state:s.state});case 4:i=e.sent,s.shopList=i.data.list,s.shopList.forEach(function(t,e){s.selIds[e]="-1"}),i.data.list.length<s.pageSize&&(s.canLoad=!1);case 8:case"end":return e.stop()}},e,s)}))()},switchSel:function(t,s,e){console.log(t,s),"-1"===this.selIds[e]?this.$set(this.selIds,e,t):this.$set(this.selIds,e,"-1"),console.log(this.selIds)},selUp:function(t){var s=this;return r()(n.a.mark(function e(){return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s[t]=!s[t],!s.selIds.every(function(t){return"-1"==t})){e.next=4;break}return l.a.showToast({title:"请先选择商品",icon:"none"}),e.abrupt("return");case 4:return s.goodsIds=s.selIds.filter(function(t){return"-1"!==t}),e.next=7,s.$API.switchShop({goodsIds:s.goodsIds.toString(),state:0==s.state?1:0});case 7:s.shopList.forEach(function(t,e){s.selIds.forEach(function(i){t.id===i&&(s.shopList.splice(e,1),s.selIds.splice(e,1))})}),console.log(s.shopList),s.shopList.forEach(function(t,e){s.selIds[e]="-1"}),s.$success("下架成功！");case 12:case"end":return e.stop()}},e,s)}))()},toGroup:function(){if(this.selIds.every(function(t){return"-1"===t}))return this.handleError("请至少选择一件商品！");this.toRoute("home/shopMgr/classifyAll",{type:0,ids:this.selIds.join(",")})}},onShow:function(){},mounted:function(){var t=this;return r()(n.a.mark(function s(){var e;return n.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t.shopNum=0,s.next=3,t.getNextPage({ob:1,state:t.state});case 3:e=s.sent,t.shopList=e.data.list,t.shopList.forEach(function(s,e){t.selIds[e]="-1"}),e.data.list.length<t.pageSize&&(t.canLoad=!1);case 7:case"end":return s.stop()}},s,t)}))()}}},zG7d:function(t,s,e){"use strict";var i={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"home"},[e("div",{staticClass:"sort-select"},[e("div",{staticClass:"top-nav"},[e("ul",[e("li",{class:[1===t.tag&&"nav-active"],attrs:{eventid:"0"},on:{click:function(s){t.handleTag(1)}}},[t._v("综合")]),t._v(" "),e("li",{class:[2===t.tag&&"nav-active"],attrs:{eventid:"1"},on:{click:function(s){t.handleTag(2)}}},[t._v("销量"),e("div",{staticClass:"sort-box"},[e("i",{staticClass:"sort-top",class:t.asceSale&&"sort-active"}),e("i",{staticClass:"sort-bottom",class:!t.asceSale&&"sort-active"})],1)]),t._v(" "),e("li",{class:[4===t.tag&&"nav-active"],attrs:{eventid:"2"},on:{click:function(s){t.handleTag(4)}}},[t._v("价格"),e("div",{staticClass:"sort-box"},[e("i",{staticClass:"sort-top",class:t.ascePrice&&"sort-active"}),e("i",{staticClass:"sort-bottom",class:!t.ascePrice&&"sort-active"})],1)]),t._v(" "),e("li",{class:[5===t.tag&&"nav-active"],attrs:{eventid:"3"},on:{click:function(s){t.handleTag(5)}}},[t._v("筛选"),e("div",{staticClass:"sort-box"},[e("i",{staticClass:"option-icon"})],1)])],1)],1),t._v(" "),e("div",[e("div",{staticClass:"box"},[t._l(t.shopList,function(s,i){return e("p",{key:i},[e("scard",{ref:"scard",refInFor:!0,attrs:{shop:s,edit:t.edit,selectedId:t.selIds[i],index:i,eventid:"4-"+i,mpcomid:"0-"+i},on:{switchSel:t.switchSel,deleteItem:t.deleteItem,searchShopGroupItem:t.searchShopGroupItem}})],1)}),t._v(" "),e("div",{staticClass:"white-block"})],2)]),t._v(" "),e("i-drawer",{attrs:{mode:"right",visible:t.showRight1,eventid:"6",mpcomid:"2"},on:{close:t.toggleRight1}},[e("selsearch",{attrs:{eventid:"5",mpcomid:"1"},on:{comSearch:t.comSearch}})],1),t._v(" "),e("i-message",{attrs:{id:"message",mpcomid:"3"}})],1),t._v(" "),e("i-modal",{attrs:{visible:t.showUp,eventid:"7",mpcomid:"4"},on:{ok:function(s){t.selUp("showUp")},cancel:function(s){t.toClose("showUp")}}},[e("div",{staticClass:"m_tips"},[t._v("确定要批量下架？")])]),t._v(" "),t.edit?e("div",{staticClass:"footer"},[e("p",{staticClass:"style1",attrs:{eventid:"10"},on:{click:function(s){t.toShow("showUp")}}},[t._v("下架")]),t._v(" "),e("p",{staticClass:"style2",attrs:{eventid:"11"},on:{click:t.toGroup}},[t._v("分组")]),t._v(" "),e("p",{staticClass:"style3",attrs:{eventid:"12"},on:{click:function(s){t.toggleEdit()}}},[t._v("完成")])],1):e("div",{staticClass:"footer"},[e("p",{staticClass:"style2",attrs:{eventid:"8"},on:{click:function(s){t.toShow("edit")}}},[t._v("批量处理")]),t._v(" "),e("p",{staticClass:"style3",attrs:{eventid:"9"},on:{click:function(s){t.toRoute("home/addShop/editShop")}}},[t._v("添加商品")])],1)],1)},staticRenderFns:[]};s.a=i},zz8Q:function(t,s){}},["SKQl"]);