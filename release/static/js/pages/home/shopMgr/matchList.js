global.webpackJsonp([3],{"08Lc":function(t,s,e){"use strict";var a=e("Xxa5"),i=e.n(a),o=e("exGp"),c=e.n(o),n=e("Dd8w"),r=e.n(n),l=e("U8g+"),h=(e.n(l),e("90m7")),d=e("NYxO"),u=this;s.a={mixins:[h.a],props:{edit:{type:Boolean,default:!1},shop:{type:Object,default:{}},act:{type:String,default:"下架"},selectedId:{type:String,default:""},index:{type:Number,default:0},check:{type:Boolean,default:!1}},$watch:{edit:function(t,s){u.check=!1,console.log(u.check)}},data:function(){return{visible4:!1,visible2:!1,visible3:!1,groupList:[],isSelectList:[]}},computed:r()({},Object(d.b)(["shopMatch"])),methods:{confirmSet:function(t){var s=this;this.$API.editGroups({goodsIds:this.shop.id,groupId:this.isSelectList.toString()}).then(function(e){wx.showToast({title:"修改分组成功",icon:"success"}),s.close(t)})},selectIcon:function(t,s){this.isSelectList[s]?this.$set(this.isSelectList,s,""):this.$set(this.isSelectList,s,t)},select:function(t,s){console.log(t,s),this.edit&&(this.shopMatch.length>=50?wx.showToast({title:"最多选择10件商品",icon:"none"}):this.check?(this.check=!1,console.log(this.shop),this.$emit("switchSel",this.shop.id,!1,this.shop)):(this.check=!0,this.$emit("switchSel",this.shop.id,!0,this.shop)))},handleClick4:function(t){var s=this,e=t.mp.detail.index;this.visible4=!1,0===e?this.toRoute("home/addShop/editShop",{shopId:this.shop.id}):1===e?this.visible2=!0:2===e?this.$API.searchType({types:1}).then(function(t){s.groupList=t.data,s.isSelectList=s.shop.groupIds.split(","),console.log(s.isSelectList),s.toOpen("visible3")}):3===e&&this.toClose("visible4")},comfirmDel:function(t){var s=this;return c()(i.a.mark(function e(){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s[t]=!1,a=0,"下架"!=s.act&&(a=1),e.next=5,s.$API.switchShop({goodsIds:s.shop.id,state:a});case 5:s.show=!1,s.$success(s.act+"成功！"),setTimeout(function(){s.$emit("deleteItem",s.shop.id)},1e3);case 8:case"end":return e.stop()}},e,s)}))()}},mounted:function(){},created:function(){console.log("搭配携带的值:",this.shop)}}},"1zy3":function(t,s){},WiLp:function(t,s,e){"use strict";var a={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"home"},[e("div",{staticClass:"sort-select"},[e("div",{staticClass:"top-nav"},[e("ul",[e("li",{class:[1===t.tag&&"nav-active"],attrs:{eventid:"0"},on:{click:function(s){t.handleTag(1)}}},[t._v("综合")]),t._v(" "),e("li",{class:[2===t.tag&&"nav-active"],attrs:{eventid:"1"},on:{click:function(s){t.handleTag(2)}}},[t._v("销量"),e("div",{staticClass:"sort-box"},[e("i",{staticClass:"sort-top",class:t.asceSale&&"sort-active"}),e("i",{staticClass:"sort-bottom",class:!t.asceSale&&"sort-active"})],1)]),t._v(" "),e("li",{class:[4===t.tag&&"nav-active"],attrs:{eventid:"2"},on:{click:function(s){t.handleTag(4)}}},[t._v("价格"),e("div",{staticClass:"sort-box"},[e("i",{staticClass:"sort-top",class:t.ascePrice&&"sort-active"}),e("i",{staticClass:"sort-bottom",class:!t.ascePrice&&"sort-active"})],1)]),t._v(" "),e("li",{class:[5===t.tag&&"nav-active"],attrs:{eventid:"3"},on:{click:function(s){t.handleTag(5)}}},[t._v("筛选"),e("div",{staticClass:"sort-box"},[e("i",{staticClass:"option-icon"})],1)])],1)],1),t._v(" "),e("scroll-view",{staticStyle:{height:"100vh"},attrs:{"scroll-y":"",eventid:"5"},on:{scrolltolower:t.lower}},[e("div",{staticClass:"scroll-box"},[e("div",{staticClass:"box"},t._l(t.shopList,function(s,a){return e("p",{key:a},[e("scard",{key:a,ref:"scard",refInFor:!0,attrs:{edit:"true",check:t.shopMatch.some(function(t){return t.goodsId===s.id}),shop:s,eventid:"4-"+a,mpcomid:"0-"+a},on:{switchSel:t.switchSel,setGroupPrice:t.setGroupPrice}})],1)})),t._v(" "),t.canLoad?e("div",{staticClass:"loading"},[t.showLoad?e("div",[e("loading",{attrs:{mpcomid:"1"}})]):t._e()]):t._e()])])],1),t._v(" "),e("div",{staticClass:"footer"},[e("p",{staticClass:"save",attrs:{eventid:"6"},on:{click:t.confirm}},[t._v("确定("+t._s(t.shopMatch.length)+")")])],1),t._v(" "),e("i-drawer",{attrs:{mode:"right",visible:t.showRight1,eventid:"8",mpcomid:"3"},on:{close:t.toggleRight1}},[e("selsearch",{attrs:{eventid:"7",mpcomid:"2"},on:{comSearch:t.comSearch}})],1)],1)},staticRenderFns:[]};s.a=a},e44C:function(t,s,e){"use strict";var a=e("uElM"),i=e("WiLp");var o=function(t){e("1zy3")},c=e("ybqe")(a.a,i.a,o,"data-v-305aad80",null);s.a=c.exports},gYDx:function(t,s){},lVMO:function(t,s,e){"use strict";var a=e("08Lc"),i=e("x4Ba");var o=function(t){e("gYDx")},c=e("ybqe")(a.a,i.a,o,"data-v-b64e29da",null);s.a=c.exports},uElM:function(t,s,e){"use strict";var a=e("woOf"),i=e.n(a),o=e("Xxa5"),c=e.n(o),n=e("exGp"),r=e.n(n),l=e("bOdI"),h=e.n(l),d=e("Dd8w"),u=e.n(d),p=(e("qTHA"),e("lVMO")),v=e("P9O9"),g=e("90m7"),f=e("yHWc"),m=e("0xDb"),x=(e.n(m),e("NYxO"));s.a={mixins:[g.a],components:{scard:p.a,loading:v.a,selsearch:f.a},computed:u()({},Object(x.b)(["shopMatch"])),data:function(){var t;return t={showUp:!1,asceSale:!0,ascePrice:!0,tag:1,showRight1:!1,edit:!1,allCheck:!1,shopNum:0,shopList:[],showLoad:!1,canLoad:!0,pageSize:20,type:0,status:0,selIds:[],state:""},h()(t,"state",1),h()(t,"groupPriceData",[]),t},methods:{confirm:function(){0===this.shopMatch.length?this.$Toast({content:"至少选择一个商品",type:"error"}):this.$router.back(-1)},handleTag:function(t){var s=this;return r()(c.a.mark(function e(){var a,i;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s.tag=t,a=1,s.shopNum=0,s.canLoad=!0,s.showLoad=!1,2===t&&(s.asceSale=!s.asceSale,a=s.asceSale?2:3),4===t&&(s.ascePrice=!s.ascePrice,a=s.ascePrice?4:5),5!==t){e.next=10;break}return s.toggleRight1(),e.abrupt("return");case 10:return s.type=a,e.next=13,s.getNextPage({ob:a,state:s.state});case 13:i=e.sent,s.shopList=i.data.list,i.data.list.length<s.pageSize&&(s.canLoad=!1);case 16:case"end":return e.stop()}},e,s)}))()},toggleRight1:function(){this.showRight1=!this.showRight1},searchShop:function(t){return t.pageSize=this.pageSize,this.$API.searchShopGroup(t)},getNextPage:function(t){return this.shopNum++,5==this.tag&&(t=i()(t,this.selParam)),t.pageNumber=this.shopNum,this.searchShop(t)},lower:function(t){var s=this;return r()(c.a.mark(function t(){var e;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(s.canLoad){t.next=2;break}return t.abrupt("return");case 2:if(!s.showLoad){t.next=4;break}return t.abrupt("return");case 4:return s.showLoad=!0,t.next=7,s.getNextPage({ob:s.type,state:s.state});case 7:e=t.sent,setTimeout(function(){e.data.list.length<s.pageSize&&(s.canLoad=!1),s.shopList=s.shopList.concat(e.data.list),s.showLoad=!1},2e3);case 9:case"end":return t.stop()}},t,s)}))()},comSearch:function(t){var s=this;return r()(c.a.mark(function e(){var a;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s.toggleRight1(),s.selParam=t,e.next=4,s.getNextPage({ob:0,state:s.state});case 4:a=e.sent,s.shopList=a.data.list,a.data.list.length<s.pageSize&&(s.canLoad=!1);case 7:case"end":return e.stop()}},e,s)}))()},switchSel:function(t,s,e){var a=this;s?this.$store.commit("PUSHMATCH",{delivery:e.delivery,goodsId:e.id,image:e.image,name:e.name,profit:e.profit,sellCount:e.sellCount,sellPrice:e.sellPrice}):this.shopMatch.forEach(function(t,s){t.goodsId===e.id&&a.$store.commit("SPLICEMATCH",s)}),console.log(this.shopMatch)},setGroupPrice:function(t){for(var s,e=0;s=this.groupPriceData[e++];)if(s.id==t.id)return s.price=t.price;this.groupPriceData.push(t)}},mounted:function(){var t=this;return r()(c.a.mark(function s(){var e;return c.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t.shopNum=0,s.next=3,t.getNextPage({ob:1,state:t.state});case 3:e=s.sent,t.shopList=e.data.list,e.data.list.length<t.pageSize&&(t.canLoad=!1),console.log(t.shopList),console.log(t.shopMatch);case 8:case"end":return s.stop()}},s,t)}))()}}},x4Ba:function(t,s,e){"use strict";var a={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"order-shop-card",attrs:{eventid:"0"},on:{click:function(s){t.select(t.shop.id,t.index,t.shop)}}},[e("div",{staticClass:"item-card"},[t.edit?e("div",{staticClass:"select-box",class:{active:t.check}}):t._e(),t._v(" "),e("i",{staticClass:"img",style:{backgroundImage:"url("+t.shop.image+")"}}),t._v(" "),e("div",{staticClass:"desc"},[e("p",{staticClass:"title"},[t._v(t._s(t.shop.name))]),t._v(" "),e("p",{staticClass:"tips"},[e("span",[t._v("档口:"+t._s(t.shop.stallInfo1+"-"+t.shop.stallInfo2+"-"+t.shop.stallInfo3))])]),t._v(" "),e("p",{staticClass:"sellnum"},[t._v("货期:"+t._s(t.shop.delivery)+"丨销量:"+t._s(t.shop.sellCount))]),t._v(" "),e("div",{staticClass:"price"},[e("span",{staticClass:"countPrice"},[t._v("售价:￥"+t._s(t.shop.sellPrice))]),t._v(" "),e("span",{staticClass:"sell"},[t._v("   利润:￥"+t._s(t.shop.profit))])])],1)],1)])},staticRenderFns:[]};s.a=a}},["bd2i"]);