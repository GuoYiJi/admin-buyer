global.webpackJsonp([34],{EvJp:function(t,i,a){"use strict";var s=a("JR+e"),e=a("L/EY");var n=function(t){a("vqVQ")},o=a("ybqe")(s.a,e.a,n,"data-v-3b973097",null);i.a=o.exports},"JR+e":function(t,i,a){"use strict";var s=a("qTHA"),e=a("90m7"),n=a("s4Nw");i.a={mixins:[e.a],components:{},data:function(){return{index:-1,img:"",materialList:[]}},methods:{setWall:function(t,i){var a=this;this.$API.warehouse({wall:t}).then(function(e){a.index=i,a.img=t,s.a.setStorageSync("FMimg",t),s.a.showToast({title:"已设置封面",icon:"success"})})},chooseImg:function(){var t=this;s.a.showLoading({title:"上传中"}),s.a.chooseImage({count:1,success:function(i){console.log(i),Object(n.a)(i.tempFilePaths[0],function(i){t.img=i,t.$API.warehouse({wall:t.img}).then(function(i){s.a.setStorageSync("FMimg",t.img),t.index=-1,s.a.showToast({title:"已设置封面",icon:"success"})})}),s.a.hideLoading()},fail:function(t){s.a.hideLoading()}})},uploadImg:function(t,i){var a=this,e=t.lastIndexOf("/")+1;s.a.uploadFile({url:config.uploadImageUrl,filePath:t,name:"file",formData:{name:t.slice(e).toString(),key:"img/${filename}",policy:config.imgPolicy,OSSAccessKeyId:config.OSSAccessKeyId,success_action_status:"200",signature:config.imgSignature},success:function(s){console.log(s),400==s.statusCode&&a.handleError("上传的图片大小不能超过2m!"),i(config.uploadImageUrl+"/img"+t.slice(e).toString())},fail:function(t){console.log(t)}})}},mounted:function(){var t=this;this.$API.selectWarehouse().then(function(i){t.img=i.data.wall,t.$API.s_getImg({type:4}).then(function(i){console.log(i),t.materialList=i.data,t.materialList.forEach(function(i,a){if(i.image==t.img)return console.log("找到相同的封面了",a),void(t.index=a)})})})}}},"L/EY":function(t,i,a){"use strict";var s={render:function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"home"},[a("div",{staticClass:"user-img",attrs:{eventid:"0"},on:{click:t.chooseImg}},[a("p",{staticClass:"name"},[t._v("从手机相册中选择")]),t._v(" "),a("img",{staticClass:"upload",attrs:{src:t.img}}),t._v(" "),a("i",{staticClass:"goback"})],1),t._v(" "),a("div",{staticClass:"content"},[a("p",{staticClass:"title"},[t._v("从素材中选取")]),t._v(" "),a("div",{staticClass:"img_box"},t._l(t.materialList,function(i,s){return a("div",{key:s,staticClass:"imgItem_box",attrs:{eventid:"1-"+s},on:{click:function(a){t.setWall(i.image,s)}}},[a("i",{staticClass:"img",style:{backgroundImage:"url("+i.image+")"}},[s===t.index?a("span",{staticClass:"using"},[t._v("正在使用")]):t._e()])],1)}))],1)])},staticRenderFns:[]};i.a=s},vqVQ:function(t,i){}},["bqPs"]);