global.webpackJsonp([32],{EvJp:function(t,i,s){"use strict";var a=s("JR+e"),e=s("L/EY");var n=function(t){s("vqVQ")},o=s("ybqe")(a.a,e.a,n,"data-v-3b973097",null);i.a=o.exports},"JR+e":function(t,i,s){"use strict";var a=s("qTHA"),e=s("90m7"),n=s("s4Nw");i.a={mixins:[e.a],components:{},data:function(){return{index:-1,img:"",materialList:[]}},methods:{setWall:function(t,i){var s=this;this.$API.warehouse({wall:t}).then(function(e){s.index=i,s.img=t,a.a.showToast({title:"已设置封面",icon:"success"})})},chooseImg:function(){var t=this;a.a.chooseImage({count:1,success:function(i){console.log(i),Object(n.a)(i.tempFilePaths[0],function(i){t.img=i,t.$API.warehouse({wall:t.img}).then(function(i){t.index=-1,a.a.showToast({title:"已设置封面",icon:"success"})})})}})},uploadImg:function(t,i){var s=this,e=t.lastIndexOf("/")+1;a.a.uploadFile({url:config.uploadImageUrl,filePath:t,name:"file",formData:{name:t.slice(e).toString(),key:"img/${filename}",policy:config.imgPolicy,OSSAccessKeyId:config.OSSAccessKeyId,success_action_status:"200",signature:config.imgSignature},success:function(a){console.log(a),400==a.statusCode&&s.handleError("上传的图片大小不能超过2m!"),i(config.uploadImageUrl+"/img"+t.slice(e).toString())},fail:function(t){console.log(t)}})}},mounted:function(){var t=this;this.$API.selectWarehouse().then(function(i){t.img=i.data.wall,t.$API.s_getImg({type:4}).then(function(i){console.log(i),t.materialList=i.data,t.materialList.forEach(function(i,s){if(i.image==t.img)return console.log("找到相同的封面了",s),void(t.index=s)})})})}}},"L/EY":function(t,i,s){"use strict";var a={render:function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"home"},[s("div",{staticClass:"user-img",attrs:{eventid:"0"},on:{click:t.chooseImg}},[s("p",{staticClass:"name"},[t._v("从手机相册中选择")]),t._v(" "),s("img",{staticClass:"upload",attrs:{src:t.img}}),t._v(" "),s("i",{staticClass:"goback"})],1),t._v(" "),s("div",{staticClass:"content"},[s("p",{staticClass:"title"},[t._v("从素材中选取")]),t._v(" "),s("div",{staticClass:"img_box"},t._l(t.materialList,function(i,a){return s("div",{key:a,staticClass:"imgItem_box",attrs:{eventid:"1-"+a},on:{click:function(s){t.setWall(i.image,a)}}},[s("i",{staticClass:"img",style:{backgroundImage:"url("+i.image+")"}},[a===t.index?s("span",{staticClass:"using"},[t._v("正在使用")]):t._e()])],1)}))],1)])},staticRenderFns:[]};i.a=a},vqVQ:function(t,i){}},["bqPs"]);