global.webpackJsonp([43],{"8D/q":function(t,e,s){"use strict";var i={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"wrapper"},[s("div",{staticClass:"tips"},[t._v("\n    "+t._s(0===t.state&&0===t.refundType?"买家发起, 仅退款":0===t.state&&1===t.refundType?"买家发起, 退货退款":0===t.state&&2===t.refundType?"买家发起, 仅换货":1===t.state&&0===t.refundType?"退款成功":1===t.state&&1===t.refundType?"退货退款成功":1===t.state&&2===t.refundType?"换货成功":2===t.state&&0===t.refundType?"仅退款已被拒绝":2===t.state&&1===t.refundType?"退款退货已被拒绝":2===t.state&&2===t.refundType?"仅换货已被拒绝":3===t.state&&1===t.refundType?"退货退款, 等待买家发货":3===t.state&&2===t.refundType?"换货, 等待买家发货":4===t.state&&1===t.refundType?"退货退款, 等待卖家收货":4===t.state&&2===t.refundType?"换货, 等待卖家收货":5===t.state?"撤销售后":"未知状态")+"\n  ")]),t._v(" "),s("div",{staticClass:"goodsList-body"},[s("div",{staticClass:"header"},[t._v("\n      退款信息\n    ")]),t._v(" "),t._l(t.goodsList,function(e,i){return s("div",{key:i,staticClass:"goods-info"},[s("div",{staticClass:"goods-body"},[s("i",{staticClass:"goods-img",style:{backgroundImage:"url("+e.image+")"}}),t._v(" "),s("div",{staticClass:"goods-message"},[s("span",{staticClass:"name"},[t._v(t._s(e.name))]),t._v(" "),s("span",[s("p",{staticClass:"stall"},[t._v("档口名称: "+t._s(e.stallInfo3))]),t._v(" "),s("p",{staticClass:"futures"},[t._v("期货: "+t._s(e.delivery))])],1),t._v(" "),s("div",{staticClass:"footer"},[s("span",t._l(t.skuList[i],function(i,a){return s("p",{key:a},[t._v("\n                  "+t._s(i.color)+"色: "+t._s(i.size)+"码/"+t._s(e.num)+"件\n                ")])})),t._v(" "),5===t.state?s("button",[t._v("编辑")]):t._e()],1)])],1),t._v(" "),s("div",{staticClass:"total"},[t._v("\n        共"+t._s(e.countNum)+"件商品, 合计: "),s("strong",[t._v(t._s(e.countPrice)+"元")])],1)])})],2),t._v(" "),s("ul",{staticClass:"orderNo"},[s("li",[t._v("买家: "+t._s(t.nick))]),t._v(" "),s("li",[t._v("姓名: "+t._s(t.accountAddress.name)+" "),s("i",{staticClass:"phone"}),t._v(t._s(t.accountAddress.mobile))],1),t._v(" "),s("li",[t._v("退款原因: "+t._s(t.reason))]),t._v(" "),s("li",[t._v("退款说明: "+t._s(t.content))]),t._v(" "),s("li",[t._v("退款金额: "+t._s(t.price))]),t._v(" "),s("li",[t._v("申请时间："+t._s(t.createTime))]),t._v(" "),t.payTime?s("li",[t._v("支付时间: "+t._s(t.payTime))]):t._e(),t._v(" "),t.isPing?s("li",[t._v("拼团时间: "+t._s(t.pingTime))]):t._e(),t._v(" "),t.deliverTime?s("li",[t._v("发货时间: "+t._s(t.deliverTime))]):t._e(),t._v(" "),t.receiptTime?s("li",[t._v("确认收货时间: "+t._s(t.receiptTime))]):t._e(),t._v(" "),s("li",[t._v("退款编号: "+t._s(t.orderRefundNo))])],1),t._v(" "),s("div",{staticClass:"voucher"},[s("div",{staticClass:"header"},[t._v("凭证: ")]),t._v(" "),s("div",{staticClass:"img-group"},[t.img1?s("div",{staticClass:"img-box"},[s("i",{staticClass:"img",style:{backgroundImage:"url("+t.img1+")"}})],1):t._e(),t._v(" "),t.img2?s("div",{staticClass:"img-box"},[s("i",{staticClass:"img",style:{backgroundImage:"url("+t.img2+")"}})],1):t._e(),t._v(" "),t.img3?s("div",{staticClass:"img-box"},[s("i",{staticClass:"img",style:{backgroundImage:"url("+t.img3+")"}})],1):t._e(),t._v(" "),t.img4?s("div",{staticClass:"img-box"},[s("i",{staticClass:"img",style:{backgroundImage:"url("+t.img4+")"}})],1):t._e(),t._v(" "),t.img5?s("div",{staticClass:"img-box"},[s("i",{staticClass:"img",style:{backgroundImage:"url("+t.img5+")"}})],1):t._e(),t._v(" "),t.img6?s("div",{staticClass:"img-box"},[s("i",{staticClass:"img",style:{backgroundImage:"url("+t.img6+")"}})],1):t._e()])]),t._v(" "),s("div",{staticClass:"white-block",staticStyle:{width:"100%",height:"100px","background-color":"#fff"}}),t._v(" "),s("div",{staticClass:"btn"},[0===t.state?s("button",{attrs:{eventid:"0"},on:{click:function(e){t.dealWithOrderRefund(1)}}},[t._v("同意")]):t._e(),t._v(" "),0===t.state?s("button",{staticClass:"style1",attrs:{eventid:"1"},on:{click:function(e){t.toggleReason()}}},[t._v("拒绝")]):t._e(),t._v(" "),4===t.state?s("button",{attrs:{eventid:"2"},on:{click:function(e){t.toggleModal("visible4")}}},[t._v("确认收货")]):t._e()],1),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showReason,expression:"showReason"}],staticClass:"mark",attrs:{eventid:"3"},on:{click:function(e){t.cancelModel()}}}),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showReason,expression:"showReason"}],staticClass:"reason"},[s("div",{staticClass:"body"},[s("div",{staticClass:"header"},[t._v("填写拒绝理由")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],attrs:{eventid:"4"},domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"footer"},[s("span",{staticClass:"button cancel",attrs:{eventid:"5"},on:{click:function(e){t.toggleReason()}}},[t._v("取消")]),t._v(" "),s("span",{staticClass:"button ok",attrs:{eventid:"6"},on:{click:function(e){t.dealWithOrderRefund(2)}}},[t._v("确定")])])]),t._v(" "),s("i-modal",{attrs:{visible:t.visible2,eventid:"7",mpcomid:"0"},on:{ok:function(e){t.confirmWithRefund()},cancel:function(e){t.toggleModal("visible2")}}},[s("div",{staticClass:"visible"},[t._v("是否同意退款金额"),s("span",{staticClass:"red"},[t._v("￥"+t._s(t.price))]),t._v("元给"),s("span",{staticClass:"red"},[t._v(t._s(t.accountAddress.name))]),t._v("?")])]),t._v(" "),s("i-modal",{attrs:{title:"是否确认收货？",visible:t.visible4,eventid:"8",mpcomid:"1"},on:{ok:function(e){t.sureReund()},cancel:function(e){t.toggleModal("visible4")}}},[s("div",{staticClass:"visible"},[t._v("将自动退还金额"),s("span",{staticClass:"red"},[t._v("￥"+t._s(t.price))]),t._v("给"),s("span",{staticClass:"red"},[t._v(t._s(t.accountAddress.name))])])])],1)},staticRenderFns:[]};e.a=i},AJOw:function(t,e,s){"use strict";var i=s("woOf"),a=s.n(i),n=s("Xxa5"),o=s.n(n),d=s("exGp"),r=s.n(d),c=s("//Fk"),l=s.n(c),u=s("qTHA");e.a={data:{orderId:"",orderRefundId:"",state:0,refundType:0,goodsList:[],accountAddress:{},orderRefundNo:"",nick:"",createTime:"",payTime:"",deliverTime:"",pingTime:"",receiptTime:"",price:0,type:"",img1:"",img2:"",img3:"",img4:"",img5:"",img6:"",reasonList:[{id:1,text:"不喜欢/不想要"},{id:2,text:"未按约定时间发货"},{id:3,text:"空包裹"},{id:4,text:"快递/物流未送达"}],content:"",showReason:!1,visible2:!1,visible4:!1},computed:{reason:function(){var t=this,e=this.reasonList.findIndex(function(e){return e.id==t.type});return-1!==e?this.reasonList[e].text:""},skuList:function(){if(this.goodsList){var t=[];return this.goodsList.forEach(function(e,s){t.push([]),e.skuList.forEach(function(e){t[s].push({color:e.skuCode.split(",")[0].toString(),size:e.skuCode.split(",")[1].toString(),num:e.num,price:e.price})})}),console.log(t),t}}},methods:{sureReund:function(){var t=this;this.$API.L_sureReund({orderRefundId:this.orderRefundId}).then(function(e){u.a.showToast({title:"已确认收货",icon:"success"}),t.visible4=!1,u.a.startPullDownRefresh()})},getRefundOrderDetail:function(t){return this.$API.L_selectOrderRefundDetail({orderRefundId:t})},cancelModel:function(){this.showReason=!1},dealWithOrderRefund:function(t){var e=this;2===t?this.$API.L_dealWithOrder({orderRefundId:this.orderId,state:t,relust:this.content}).then(function(t){u.a.showToast({title:"已拒绝",icon:"success"}),e.showReason=!1,u.a.startPullDownRefresh()}):1===t&&u.a.showModal({title:"提示",content:"是否同意确认处理该售后订单？",success:function(t){t.confirm&&e.confirmWithRefund()}})},confirmWithRefund:function(){var t=this,e=this.orderRefundId;this.$API.L_dealWithOrder({orderRefundId:e,state:1,content:""}).then(function(e){u.a.showToast({title:"已同意",icon:"success"}),u.a.startPullDownRefresh(),t.showReason=!1,t.visible2=!1})},toggleReason:function(){this.showReason=!this.showReason},toggleModal:function(t){this[t]=!this[t]},fetch:function(){var t=this;return new l.a(function(e,s){t.$route.query.orderRefundId?(console.log("请求了售后订单详情"),t.orderRefundId=t.$route.query.orderRefundId,t.getRefundOrderDetail(t.orderRefundId).then(function(e){t.state=e.data.state,t.orderId=e.data.id,t.refundType=e.data.refundType,t.goodsList=e.data.goodsList,t.orderRefundNo=e.data.orderRefundNo,t.accountAddress=e.data.accountAddress,t.createTime=e.data.createTime,t.nick=e.data.nick,t.price=e.data.price,console.log("price",e.data.price),e.data.img1&&(t.img1=e.data.img1),e.data.img2&&(t.img2=e.data.img2),e.data.img3&&(t.img3=e.data.img3),e.data.img4&&(t.img4=e.data.img4),e.data.img5&&(t.img5=e.data.img5),e.data.img6&&(t.img6=e.data.img6),e.data.accountAddress&&(t.orderAddress=e.data.accountAddress),e.data.payTime&&(t.payTime=e.data.payTime),e.data.deliverTime&&(t.deliverTime=e.data.deliverTime),e.data.receiptTime&&(t.receiptTime=e.data.receiptTime),t.content=e.data.content,t.type=e.data.type}).finally(function(){e()})):e()})}},onPullDownRefresh:function(){var t=this;return r()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetch();case 2:u.a.stopPullDownRefresh();case 3:case"end":return e.stop()}},e,t)}))()},mounted:function(){this.fetch(),u.a.getStorageSync("dpName")&&(this.shopName=u.a.getStorageSync("dpName"))},onUnload:function(){a()(this,this.$options.data())}}},Hvjc:function(t,e){},jbIb:function(t,e,s){"use strict";var i=s("AJOw"),a=s("8D/q");var n=function(t){s("Hvjc")},o=s("ybqe")(i.a,a.a,n,"data-v-b1ca61d0",null);e.a=o.exports}},["HOYa"]);