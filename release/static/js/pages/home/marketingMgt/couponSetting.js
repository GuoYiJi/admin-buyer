global.webpackJsonp([59],{CPYo:function(t,e,i){"use strict";var a={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"nav"},[i("form",{staticClass:"form"},[i("div",{staticClass:"head"},[i("span",{staticClass:"head_text"},[t._v("优惠券名称：")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.head_input,expression:"head_input"}],staticClass:"head_input",attrs:{type:"text",placeholder:"请输入（8个字以内，不可特殊字符）",eventid:"0"},domProps:{value:t.head_input},on:{input:function(e){e.target.composing||(t.head_input=e.target.value)}}})]),t._v(" "),i("div",{staticClass:"value"},[i("span",{staticClass:"value_text"},[t._v("面值：")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.value_input,expression:"value_input"}],staticClass:"value_input",attrs:{type:"digit",placeholder:"请输入面值",eventid:"1"},domProps:{value:t.value_input},on:{input:function(e){e.target.composing||(t.value_input=e.target.value)}}})]),t._v(" "),i("div",{staticClass:"grant"},[i("span",{staticClass:"grant_text"},[t._v("发放总量：")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.grant_input,expression:"grant_input"}],staticClass:"grant_input",attrs:{type:"number",placeholder:t.value_input?"请输入发放数量":"请先输入面值",disabled:!t.value_input,eventid:"2"},domProps:{value:t.grant_input},on:{input:function(e){e.target.composing||(t.grant_input=e.target.value)}}})]),t._v(" "),i("div",{staticClass:"effect"},[i("span",{staticClass:"text"},[t._v("生效时间：")]),t._v(" "),""==t.date?i("span",{staticClass:"settings"},[t._v("\n        未设置\n        ")]):t._e(),t._v(" "),i("picker",{staticClass:"picker_1",attrs:{mode:"date",start:t.startTime,end:t.endTime,value:t.date,eventid:"3"},on:{change:t.bindDateChange}},[i("view",{staticClass:"picker"},[t._v("\n          "+t._s(t.date)+"\n        ")])])],1),t._v(" "),i("div",{staticClass:"effect"},[i("span",{staticClass:"text"},[t._v("过期时间：")]),t._v(" "),""==t.date1?i("span",{staticClass:"settings"},[t._v("\n        未设置\n        ")]):t._e(),t._v(" "),i("picker",{staticClass:"picker_1",attrs:{mode:"date",start:t.startTime1,value:t.date1,eventid:"4"},on:{change:t.bindDateChange1}},[i("view",{staticClass:"picker"},[t._v("\n          "+t._s(t.date1)+"\n        ")])])],1),t._v(" "),i("div",{staticClass:"effect",attrs:{eventid:"5"},on:{click:t.Receive}},[i("span",{staticClass:"text"},[t._v("领取设置：")]),t._v(" "),i("span",{staticClass:"settings"},[""==t.ling?i("span",{staticClass:"settings_text"},[t._v("未设置")]):t._e(),t._v(" "),""!=t.ling?i("span",{staticClass:"settings_text"},[t._v("已设置")]):t._e()])]),t._v(" "),i("div",{staticClass:"effect",attrs:{eventid:"6"},on:{click:t.Use}},[i("span",{staticClass:"text"},[t._v("使用设置：")]),t._v(" "),i("span",{staticClass:"settings"},[""==t.isOriginalPrice?i("span",{staticClass:"settings_text"},[t._v("未设置")]):t._e(),t._v(" "),""!=t.isOriginalPrice?i("span",{staticClass:"settings_text"},[t._v("已设置")]):t._e()])])]),t._v(" "),i("div",{staticClass:"btn",attrs:{eventid:"7"},on:{click:t.btn_1}},[i("span",{staticClass:"btn_1"},[t._v("保存")])])],1)},staticRenderFns:[]};e.a=a},DC1W:function(t,e,i){"use strict";var a=i("oCTK"),s=i("CPYo");var n=function(t){i("dJDT")},l=i("ybqe")(a.a,s.a,n,"data-v-1cd211b5",null);e.a=l.exports},dJDT:function(t,e){},oCTK:function(t,e,i){"use strict";var a=i("Xxa5"),s=i.n(a),n=i("exGp"),l=i.n(n),o=i("qTHA"),r=i("90m7");e.a={mixins:[r.a],components:{},data:function(){return{date:"",startTime:new Date,endTime:new Date((new Date).getTime()+31536e7),date1:"",startTime1:new Date((new Date).getTime()+864e5),isLimitCount:"",please_input:"",isOriginalPrice:"",grant_input:"",value_input:"",head_input:"",ling:"",isAll:"",selIds:""}},methods:{bindDateChange:function(t){this.date=t.mp.detail.value,this.startTime1=t.mp.detail.value},bindDateChange1:function(t){this.date?parseInt(this.date1)<parseInt(t.mp.detail.value)?o.a.showToast({title:"过期时间不得早于生效时间",icon:"none"}):(this.date1=t.mp.detail.value,this.endTime=this.date1):o.a.showToast({title:"请先设置生效时间",icon:"none"})},btn_1:function(){var t=this;return l()(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.head_input.split("").length>8)){e.next=3;break}return o.a.showToast({title:"优惠券名称不能超过8个字符",icon:"none"}),e.abrupt("return");case 3:t.isLimitCount=o.a.getStorageSync("isLimitCount"),console.log(t.isLimitCount,"选择"),t.please_input=o.a.getStorageSync("please_input"),console.log(t.please_input,"输入"),t.isOriginalPrice=o.a.getStorageSync("isOriginalPrice"),console.log(t.isOriginalPrice,"xz"),t.ok().then(function(e){o.a.showToast({title:"创建成功",icon:"success"}),o.a.removeStorageSync("isLimitCount"),o.a.removeStorageSync("please_input"),o.a.removeStorageSync("isOriginalPrice"),o.a.removeStorageSync("isAll"),t.date="",t.date1="",t.startTime=new Date,t.startTime1=new Date((new Date).getTime()+864e5),t.value_input="",t.grant_input="",t.head_input="",setTimeout(function(){t.$router.back(-1)},1500)});case 10:case"end":return e.stop()}},e,t)}))()},ok:function(){return this.$API.newCoupon({name:this.head_input,price:this.value_input,count:this.grant_input,startTime:this.date,endTime:this.date1,isLimitCount:this.isLimitCount,limitCount:this.please_input,isOriginalPrice:this.isOriginalPrice,originalGoodsIds:this.selIds.toString(),isAll:this.isAll})},Use:function(){this.$router.push("/pages/home/marketingMgt/usageSettings/usageSettings")},Receive:function(){this.$router.push("/pages/home/marketingMgt/settings/settings")},couponsave:function(){},huanc:function(){this.isLimitCount=o.a.getStorageSync("isLimitCount"),this.please_input=o.a.getStorageSync("please_input"),this.isOriginalPrice=o.a.getStorageSync("isOriginalPrice"),this.selIds=o.a.getStorageSync("selIds"),this.isAll=o.a.getStorageSync("isAll"),""==this.isLimitCount&&""==this.please_input&&(this.ling="",console.log(this.ling)),""==this.isLimitCount&&""==this.please_input||(this.ling=1,console.log(this.ling))}},onShow:function(){this.huanc()}}}},["2fqi"]);