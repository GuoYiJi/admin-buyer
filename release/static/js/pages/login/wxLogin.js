global.webpackJsonp([20],{"2Jy8":function(e,n,t){"use strict";var o=t("woOf"),r=t.n(o),a=t("Xxa5"),s=t.n(a),i=t("exGp"),c=t.n(i),u=t("qTHA"),f=t("90m7");t("QmSG");n.a={mixins:[f.a],components:{},data:function(){return{userInfoBool:!1,userInfo:{},code:""}},computed:{showBtn:function(){return this.userInfoBool}},methods:{getPhoneNumber:function(e){var n=this;return c()(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:console.log(e,"getPhoneNumber"),e.mp.detail.encryptedData?(console.log(e.mp.detail),n.login(e.mp.detail)):n.handleError("需要同意授权才可以使用噢！");case 2:case"end":return t.stop()}},t,n)}))()},getUserInfo:function(e){console.log(e),e.mp.detail.encryptedData?(this.userInfoBool=!0,this.userInfo=e.mp.detail):this.handleError("需要同意授权才可以使用噢！")},login:function(e){var n=this;return c()(s.a.mark(function t(){var o;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("encryptedData",e),t.prev=1,t.next=4,n.$API.authLogin({avatar:n.userInfo.userInfo.avatarUrl,nick:n.userInfo.userInfo.nickName,encryptedDataPhone:e.encryptedData,ivPhone:e.iv});case 4:o=t.sent,console.log("data",o),u.a.setStorageSync("is-login",!0),u.a.switchTab({url:"/pages/home/home"}),t.next=12;break;case 10:t.prev=10,t.t0=t.catch(1);case 12:case"end":return t.stop()}},t,n,[[1,10]])}))()}},mounted:function(){var e=this;return c()(s.a.mark(function n(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},n,e)}))()},onUnload:function(){r()(this,this.$options.data())}}},"5R0q":function(e,n,t){"use strict";var o={render:function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"home"},[t("div",{staticClass:"login"},[e.userInfo.userInfo?t("p",[t("img",{staticClass:"icon_wx",attrs:{src:e.userInfo.userInfo.avatarUrl}})]):t("p",[t("i",{staticClass:"icon_wx"})],1),e._v(" "),t("p",[e._v(e._s(e.userInfo.userInfo?e.userInfo.userInfo.nickName:"微信登陆"))])],1),e._v(" "),t("i-message",{attrs:{id:"message",mpcomid:"0"}}),e._v(" "),e.userInfoBool?e._e():t("button",{staticClass:"user_btn wx_btn",attrs:{"open-type":"getUserInfo",eventid:"0"},on:{getuserinfo:e.getUserInfo}},[e._v("获取用户信息")]),e._v(" "),e.userInfoBool?t("button",{staticClass:"wx_btn",attrs:{"open-type":"getPhoneNumber",eventid:"1"},on:{getphonenumber:e.getPhoneNumber}},[e._v("授权登陆")]):e._e()],1)},staticRenderFns:[]};n.a=o},TE2T:function(e,n){},xe5A:function(e,n,t){"use strict";var o=t("2Jy8"),r=t("5R0q");var a=function(e){t("TE2T")},s=t("ybqe")(o.a,r.a,a,"data-v-5d532e58",null);n.a=s.exports}},["w6IV"]);