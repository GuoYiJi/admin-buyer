global.webpackJsonp([18],{"2Jy8":function(e,t,n){"use strict";var r=n("Xxa5"),a=n.n(r),o=n("exGp"),s=n.n(o),c=n("qTHA"),i=n("90m7");n("QmSG");t.a={mixins:[i.a],components:{},data:function(){return{userInfoBool:!1,userInfo:{},code:""}},computed:{showBtn:function(){return this.userInfoBool}},methods:{getPhoneNumber:function(e){var t=this;return s()(a.a.mark(function n(){return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:console.log(e,"getPhoneNumber"),e.mp.detail.encryptedData?(console.log(e.mp.detail),t.login(e.mp.detail)):t.handleError("需要同意授权才可以使用噢！");case 2:case"end":return n.stop()}},n,t)}))()},getUserInfo:function(e){console.log(e),e.mp.detail.encryptedData?(this.userInfoBool=!0,this.userInfo=e.mp.detail):this.handleError("需要同意授权才可以使用噢！")},login:function(e){var t=this;return s()(a.a.mark(function n(){var r;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("encryptedData",e),n.prev=1,n.next=4,t.$API.authLogin({avatar:t.userInfo.userInfo.avatarUrl,nick:t.userInfo.userInfo.nickName,encryptedDataPhone:e.encryptedData,ivPhone:e.iv,encryptedData:t.userInfo.encryptedData,iv:t.userInfo.iv});case 4:return r=n.sent,console.log("data",r),n.next=8,c.a.setStorageSync("production_sessionId",r.data.sessionId);case 8:return c.a.setStorageSync("is-login",!0),n.next=11,c.a.setStorageSync("avatar",r.data.avatar);case 11:c.a.switchTab({url:"/pages/home/home"}),n.next=16;break;case 14:n.prev=14,n.t0=n.catch(1);case 16:case"end":return n.stop()}},n,t,[[1,14]])}))()}},mounted:function(){var e=this;return s()(a.a.mark(function t(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},t,e)}))()}}},"5R0q":function(e,t,n){"use strict";var r={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[n("div",{staticClass:"login"},[e.userInfo.userInfo?n("p",[n("img",{staticClass:"icon_wx",attrs:{src:e.userInfo.userInfo.avatarUrl}})]):n("p",[n("i",{staticClass:"icon_wx"})],1),e._v(" "),n("p",[e._v(e._s(e.userInfo.userInfo?e.userInfo.userInfo.nickName:"微信登陆"))])],1),e._v(" "),n("i-message",{attrs:{id:"message",mpcomid:"0"}}),e._v(" "),e.userInfoBool?e._e():n("button",{staticClass:"user_btn wx_btn",attrs:{"open-type":"getUserInfo",eventid:"0"},on:{getuserinfo:e.getUserInfo}},[e._v("获取用户信息")]),e._v(" "),e.userInfoBool?n("button",{staticClass:"wx_btn",attrs:{"open-type":"getPhoneNumber",eventid:"1"},on:{getphonenumber:e.getPhoneNumber}},[e._v("授权登陆")]):e._e()],1)},staticRenderFns:[]};t.a=r},TE2T:function(e,t){},xe5A:function(e,t,n){"use strict";var r=n("2Jy8"),a=n("5R0q");var o=function(e){n("TE2T")},s=n("ybqe")(r.a,a.a,o,"data-v-5d532e58",null);t.a=s.exports}},["w6IV"]);