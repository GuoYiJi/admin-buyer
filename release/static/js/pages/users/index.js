global.webpackJsonp([10],{Bzv0:function(t,n){},bWh1:function(t,n,a){"use strict";var e={render:function(){var t=this,n=t.$createElement,a=t._self._c||n;return a("div",[a("zan-tab",{attrs:{list:t.tab,"selected-id":t.selectedId,eventid:"0",mpcomid:"0"},on:{tabchange:t.handleZanTabChange}}),t._v(" "),t._l(t.tab,function(n,e){return a("div",{directives:[{name:"show",rawName:"v-show",value:t.selectedId===n.id,expression:"selectedId === tab.id"}],key:e,staticClass:"tab-container"},[t._l(n.data,function(n,i){return a("div",{key:n.id,staticClass:"van-cell-group van-hairline--top-bottom van-panel demo-panel"},[a("div",{staticClass:"van-cell van-panel__header"},[a("div",{staticClass:"van-cell__title"},[a("span",[t._v(t._s(n.nick||"该管理员未授权"))]),t._v(" "),a("div",{staticClass:"van-cell__label"},[t._v(t._s(n.mobile))])]),t._v(" "),a("div",{staticClass:"van-cell__value"},[1===n.state?a("span",[t._v("已冻结状态")]):a("span",{staticStyle:{color:"#010101"}},[t._v("正常")])])]),t._v(" "),a("div",{staticClass:"van-hairline--top van-panel__footer"},[a("div",[a("span",{staticClass:"van-button van-button--default van-button--small",attrs:{eventid:"1-"+e+"-"+i},on:{click:function(a){t.handleUpdateStatus(n,i)}}},[a("span",{staticClass:"van-button__text"},[t._v(t._s(0==n.state?"冻结":"解冻"))])]),t._v(" "),a("span",{staticClass:"van-button van-button--danger van-button--small",attrs:{eventid:"2-"+e+"-"+i},on:{click:function(a){t.handleRemove(n,i)}}},[a("span",{staticClass:"van-button__text"},[t._v("删除")])])])])])}),t._v(" "),a("div",{staticClass:"navbar-b",attrs:{eventid:"3-"+e},on:{click:t.handleAdd}},[t._m(0,!0)])],2)})],2)},staticRenderFns:[function(){var t=this.$createElement,n=this._self._c||t;return n("div",{staticClass:"van-button van-button--warning van-button--normal van-button--bottom-action"},[n("span",{staticClass:"van-button__text"},[this._v("添加管理员")])])}]};n.a=e},dc88:function(t,n,a){"use strict";var e=a("xJ/i"),i=a("bWh1");var s=function(t){a("Bzv0")},c=a("ybqe")(e.a,i.a,s,"data-v-3d5281fe",null);n.a=c.exports},"xJ/i":function(t,n,a){"use strict";var e=a("woOf"),i=a.n(e),s=a("Xxa5"),c=a.n(s),o=a("exGp"),d=a.n(o),l=a("Dd8w"),r=a.n(l),u=a("qTHA");n.a={data:function(){return{selectedId:"enable",tab:[{id:"enable",title:"已授权",state:0,data:[]},{id:"disable",title:"已冻结",state:1,data:[]}]}},computed:{current:function(){var t=this,n=this.tab.findIndex(function(n){return n.id===t.selectedId});return-1!==n?this.tab[n]:{}}},methods:{handleRemove:function(t,n){var a=this;u.a.showModal({title:"删除管理员",content:"确认是否删除管理员"+(t.nick||""),success:function(e){e.confirm&&(console.log("1"),a.$API.delPrivilege({privilegeIds:t.id}).then(function(t){a.removeTabDataItem(n)}))}})},setTab:function(t){var n=this,a=this.tab.findIndex(function(t){return t.id===n.selectedId});-1!==a&&this.tab.splice(a,1,r()({},this.tab[a],t))},removeTabDataItem:function(t){var n=this,a=this.tab.findIndex(function(t){return t.id===n.selectedId});-1!==a&&(console.log(this.tab[a].data.filter(function(n,a){return a!==t}),t),this.tab.splice(a,1,r()({},this.tab[a],{data:this.tab[a].data.filter(function(n,a){return a!==t})})))},handleAdd:function(){this.$router.push({path:"/pages/users/add/index"})},handleZanTabChange:function(t){var n=t.mp.detail;n!==this.selectedId&&(this.selectedId=n,this.fetch())},fetch:function(){var t=this;u.a.showLoading({title:"加载中"});try{this.$API.selectPrivilege({state:this.current.state}).then(function(n){t.setTab({data:n.data})}).catch(function(n){var a=n.data;u.a.showModal({title:"提示",content:a.desc,confirmText:"知道了",showCancel:!1,success:function(n){n.confirm&&t.$router.back()}})}).finally(function(){u.a.hideLoading()})}catch(t){console.log(t)}},handleUpdateStatus:function(t,n){var a=this,e=0===t.state?"冻结":"解冻";u.a.showModal({title:"提示",content:"确认是否"+e+"管理员"+(t.nick||""),success:function(n){n.confirm&&a.$API.updateState({privilegeIds:t.id,state:0===t.state?1:0}).then(function(t){a.fetch()}).catch(function(t){})}})}},onShow:function(){this.fetch()},mounted:function(){var t=this;return d()(c.a.mark(function n(){return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}},n,t)}))()},onUnload:function(){i()(this,this.$options.data())}}}},["i+c1"]);